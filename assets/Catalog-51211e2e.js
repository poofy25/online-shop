import{a,F as E,j as g,r as m,g as A,h as L,_ as T,u as w}from"./index-cc1f2768.js";import{s as N,J as F}from"./filter-82ad5ad8.js";import{P as x}from"./Product-1332f8b8.js";const b=function(s){if(s.search){const n=decodeURI(s.search).split("&"),o=Object();for(let i=0;i<n.length;i++){const t=n[i].split("=");t[1]=t[1].replace("%3D","="),t[0]=t[0].replace("?",""),typeof o[t[0]]>"u"?o[t[0]]=[t[1]]:o[t[0]].push(t[1])}return o}else return null};function $(s){const e=s.catalogData.searchData[s.catalogData.catalogPage-1];return e?a(E,{children:a("div",{className:"catalogProductsContainer",children:s.catalogData.searchData.length>0?e.map((n,o)=>a("div",{className:"catalogProduct",children:a(x,{product_object:n})},o)):a("p",{children:"NO PRODUCTS WERE FOUND"})})}):a("p",{children:"damn"})}function q(s){const e=s.catalogData,n=s.setCatalogData,o=()=>{e.catalogPage>1&&(n({...e,catalogPage:e.catalogPage-1}),document.documentElement.scrollTop=0)},i=()=>{e.catalogPage<e.searchData.length&&(n({...e,catalogPage:e.catalogPage+1}),document.documentElement.scrollTop=0)},t=l=>{l.target.textContent!=e.catalogPage&&(n({...e,catalogPage:Number(l.target.textContent)}),document.documentElement.scrollTop=0)};for(let l=0;l<document.querySelectorAll(".numberedBtns").length;l++)document.querySelectorAll(".numberedBtns")[l].textContent==e.catalogPage?document.querySelectorAll(".numberedBtns")[l].classList.add("deactivateNumberedBtn"):document.querySelectorAll(".numberedBtns")[l].classList.remove("deactivateNumberedBtn");return g("div",{className:"catalogPagesNavigatorContainer",children:[a("button",{onClick:o,className:`movingBtns ${e.catalogPage===1?"deactivateMovingBtn":""}`,children:"<"}),a("button",{onClick:t,className:"numberedBtns",children:1}),e.searchData.length<4?e.searchData.map((l,r)=>{if(!(r===0||e.searchData.length===1))return a("button",{onClick:t,className:"numberedBtns",children:r+1},r)}):e.searchData.map((l,r)=>{if(!(e.searchData.length===1||r===e.searchData.length-1))return a("button",{onClick:t,className:"numberedBtns",children:r+2},r)}),a("button",{onClick:i,className:`movingBtns ${e.catalogPage===e.searchData.length?"deactivateMovingBtn":""}`,children:">"})]})}const H="/online-shop/assets/filterIcon-2a7d15cc.png";function R(s){const e=s.option,n=s.filters,[o,i]=m.useState(),t=()=>{s.setOptionSelected({name:e.name,element:e.element,data:e==null?void 0:e.data})};return m.useEffect(()=>{n[e.name.toLowerCase()]?i(n[e.name.toLowerCase()].toString().replaceAll(","," , ")):(n.range||n.sale)&&e.name==="Price"?(n.range&&(n.range[0]===">="?i(`Over ${n.range[1]}$`):i(`Under ${n.range[1]}$`)),n.sale&&i(o?l=>`${l} , On sale`:"On sale")):i(null)},[n]),a("div",{className:"catalogFilterBtn",onClick:t,children:g("div",{className:"catalogFilterBtnContainer",children:[g("div",{className:"catalogFilterBtnContainerWrapper",children:[a("p",{children:e==null?void 0:e.name}),g("button",{className:"filterArrowBtn",children:[a("div",{}),a("div",{})]})]}),o&&a("div",{className:"selectedDataContainer",children:o})]})})}function O(s){return a("div",{className:"viewItemsContainer",children:a("button",{onClick:()=>{s.closeFilterMenu(!1)},children:"VIEW ITEMS"})})}function I(s){const e=s.filters,n=s.setFilters,o=s.data,i=(t,l)=>{e.color?e.color.indexOf(l)===-1?(t.currentTarget.classList.add("selected"),n(r=>({...r,color:[l,...r.color]}))):(t.currentTarget.classList.remove("selected"),n(r=>{if(r.color.filter(d=>d!==l).length===0){const{color:d,...c}=r;return c}return{...r,color:r.color.filter(d=>d!==l)}})):(t.currentTarget.classList.add("selected"),n(r=>({...r,color:[l]})))};return a("div",{className:"filterOptionContaianer",children:o.map((t,l)=>{var d;let r=!1;return((d=e==null?void 0:e.color)==null?void 0:d.indexOf(t.name))!==-1&&e.color&&(r=!0),a("div",{className:`filterOptionBtn ${r&&"selected"} `,onClick:c=>{i(c,t.name)},children:g("div",{className:"filterOptionBtnContainer",children:[a("div",{style:{backgroundColor:t.value},className:"colorDiv"}),a("p",{children:t.name}),a("div",{className:"check"})]})},l)})})}function V(s){const e=s.filters,n=s.setFilters,o=s.data,i=(t,l)=>{e.category?e.category.indexOf(l)===-1?(t.currentTarget.classList.add("selected"),n(r=>({...r,category:[l]}))):(t.currentTarget.classList.remove("selected"),n(r=>{if(r.category.filter(d=>d!==l).length===0){const{category:d,...c}=r;return c}return{...r,category:r.category.filter(d=>d!==l)}})):(t.currentTarget.classList.add("selected"),n(r=>({...r,category:[l]})))};return a("div",{className:"filterOptionContaianer",children:o.map((t,l)=>{var d;let r=!1;return((d=e==null?void 0:e.category)==null?void 0:d.indexOf(t.name))!==-1&&e.category&&(r=!0),a("div",{className:`filterOptionBtn ${r&&"selected"} `,onClick:c=>{i(c,t.name)},children:g("div",{className:"filterOptionBtnContainer",children:[a("p",{children:t.name}),a("div",{className:"check"})]})},l)})})}function z(s){const e=s.filters,n=s.setFilters,o=m.useRef(null),i=m.useRef(!1),[t,l]=m.useState(e!=null&&e.range?[e.range[0],e.range[1]]:[">=","5"]),r=c=>{e!=null&&e.sale?(c.currentTarget.classList.remove("selected"),n(u=>{const{sale:h,...f}=u;return{...f}})):(c.currentTarget.classList.add("selected"),n(u=>({...u,sale:!0})))},d=(c,u)=>{document.querySelector(".priceBtn.active").classList.remove("active"),c.currentTarget.classList.add("active"),l(h=>{const f=[...h];return f[0]=u,f})};return m.useEffect(()=>{i.current===!0?(o.current.textContent=`${t[1]}$`,n(c=>({...c,range:t}))):i.current=!0},[t]),m.useEffect(()=>{document.getElementById("priceInput").value=e!=null&&e.range?e==null?void 0:e.range[1]:"5"},[]),g("div",{className:"filterOptionContaianer",children:[a("div",{className:`filterOptionBtn ${(e==null?void 0:e.sale)!==!1&&(e==null?void 0:e.sale)&&"selected"} `,onClick:c=>{r(c,e.sale)},children:g("div",{className:"filterOptionBtnContainer",children:[a("p",{children:"Sale"}),a("div",{className:"check"})]})}),a("div",{className:"filterOptionBtn",children:g("div",{className:"filterOptionBtnContainer price",children:[g("div",{className:"priceWrapper",children:[a("button",{className:`priceBtn ${e!=null&&e.range?(e==null?void 0:e.range[0])===">="&&"active":"active"}`,onClick:c=>{d(c,">=")},children:"Over"}),g("p",{ref:o,children:[e!=null&&e.range?e.range[1]:t[1],"$"]}),a("button",{className:`priceBtn ${(e==null?void 0:e.range)&&(e==null?void 0:e.range[0])==="<="&&"active"}`,onClick:c=>{d(c,"<=")},children:"Under"})]}),g("div",{className:"inputWrapper",children:[a("input",{type:"range",id:"priceInput",min:"5",max:"250",step:"5",list:"tickmarks",onChange:()=>{l(c=>{const u=[...c];return u[1]=document.getElementById("priceInput").value,u})}}),g("datalist",{id:"tickmarks",children:[a("option",{value:"5",label:"5$"}),a("option",{value:"250",label:"250$"})]})]})]})})]})}function M(s){const e=s.filters,n=s.setFilters,o=s.data,i=(t,l)=>{e.size?e.size.indexOf(l)===-1?(t.currentTarget.classList.add("selected"),n(r=>({...r,size:[l,...r.size]}))):(t.currentTarget.classList.remove("selected"),n(r=>{if(r.size.filter(d=>d!==l).length===0){const{size:d,...c}=r;return c}return{...r,size:r.size.filter(d=>d!==l)}})):(t.currentTarget.classList.add("selected"),n(r=>({...r,size:[l]})))};return a("div",{className:"filterOptionContaianer",children:o.map((t,l)=>{var d;let r=!1;return((d=e==null?void 0:e.size)==null?void 0:d.indexOf(t.name))!==-1&&e.size&&(r=!0),a("div",{className:`filterOptionBtn ${r&&"selected"} `,onClick:c=>{i(c,t.name)},children:g("div",{className:"filterOptionBtnContainer",children:[a("p",{children:t.name}),a("div",{className:"check"})]})},l)})})}const j=[{name:"Red",value:"rgb(255,0,0)"},{name:"Brown",value:"rgb(165, 42, 42)"},{name:"Khaki",value:"rgb(240, 230, 140)"},{name:"Yellow",value:"rgb(255,255,0)"},{name:"Olive",value:"rgb(128,128,0)"},{name:"Green",value:"rgb(0,255,0)"},{name:"Light blue",value:"rgb(173, 216, 230)"},{name:"Blue",value:"rgb(0, 0, 255)"},{name:"Navy",value:"rgb(0, 0, 128)"},{name:"Purple",value:"rgb(128, 0, 128)"},{name:"Pink",value:"rgb(255, 192, 203)"},{name:"Black",value:"rgb(0,0,0)"},{name:"Gray",value:"rgb(128, 128, 128)"},{name:"Beige",value:"rgb(245, 245, 220)"},{name:"White",value:"rgb(255,255,255)"}],_=[{name:"Shirts"},{name:"Dresses"},{name:"Jeans"},{name:"Sportswear"},{name:"Coats"},{name:"Tops"},{name:"Hoodies"},{name:"Leggings"},{name:"Trousers"}],U=[{name:"XXS"},{name:"XS"},{name:"S"},{name:"M"},{name:"L"},{name:"XL"},{name:"XXL"}];let W=[{name:"Category",element:a(V,{}),data:_},{name:"Color",element:a(I,{}),data:j},{name:"Size",element:a(M,{}),data:U},{name:"Price",element:a(z,{})}];function X(s){var k,p;const e=s.filtersBtn.current,n=A(),o=m.useRef(null),i=L(),t=m.useRef(!1),l=b(i),[r,d]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState({...l});return e&&(e.onclick=()=>{d(!r)}),m.useEffect(()=>{h!==s.urlParams&&f({...s.urlParams})},[s.urlParams]),m.useEffect(()=>{t.current?r?(o.current.classList.add("on"),document.body.style.overflow="hidden",u(null)):(o.current.classList.remove("on"),document.body.style.overflow="auto",h&&n(h)):t.current=!0},[r]),m.useEffect(()=>{c!==null&&(document.querySelector(".catalogFiltersSecond").classList.add("Active"),document.querySelector(".catalogFiltersFirst").classList.remove("Active")),c===null&&(document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"))},[c]),g("div",{className:"catalogFilterMenu",ref:o,children:[g("div",{className:"catalogFiltersContainer",children:[g("div",{className:"catalogFiltersFirst",children:[a("div",{className:"catalogFilterHeader",children:a("p",{children:"FILTER"})}),a("div",{className:"catalogFilterOptions",children:W.map((C,y)=>a(R,{option:{...C},setOptionSelected:u,filters:h},y))}),a(O,{closeFilterMenu:d})]}),g("div",{className:"catalogFiltersSecond",children:[g("div",{className:"catalogFilterHeader",children:[g("button",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{u(null)},500)},children:[a("div",{}),a("div",{})]}),a("p",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{u(null)},500)},children:(k=c==null?void 0:c.name)==null?void 0:k.toUpperCase()}),(c==null?void 0:c.name)!=="Price"?a("button",{className:"selectionBtn",onClick:()=>{var C,y;if(h[(C=c==null?void 0:c.name)==null?void 0:C.toLowerCase()]){const S={...h};delete S[(y=c==null?void 0:c.name)==null?void 0:y.toLowerCase()],f(S)}},children:h[(p=c==null?void 0:c.name)==null?void 0:p.toLowerCase()]&&a("p",{children:"CLEAR"})}):a("button",{className:"selectionBtn",onClick:()=>{if(h.sale||h.range){const C={...h};delete C.range,delete C.sale,f(C)}},children:h.sale&&a("p",{children:"CLEAR"})||h.range&&a("p",{children:"CLEAR"})})]}),a("div",{className:"catalogFilterOptions",children:(c==null?void 0:c.element)&&m.cloneElement(c==null?void 0:c.element,{setFilters:f,filters:h,data:c==null?void 0:c.data})}),a(O,{closeFilterMenu:d})]})]}),a("div",{className:"catalogFiltersShadow",onClick:()=>{d(!1)}})]})}const J=m.lazy(()=>T(()=>import("./CatalogDesktopFilter-eae56785.js"),["assets/CatalogDesktopFilter-eae56785.js","assets/index-cc1f2768.js","assets/index-d816d335.css","assets/CatalogDesktopFilter-6b4caed0.css"])),G=["All Categories","Shirts","Dresses","Jeans","Sportswear","Coats","Tops","Hoodies","Leggings","Trousers"];let v=null;const B=(s,e)=>{for(var n=0;n<e.length;n++)if(e[n].textContent==s)return e[n];return"nothing"};function K(s){const e=s.catalogData,n=A(),o=L(),i=b(o);let t,l;const r=m.useRef(null),d=window.innerWidth<=767,c=u=>{if(v!==u.target){if(l=u.target.textContent==="All Categories"?"*":u.target.textContent,l!=="*")t={...i,category:[l]};else{const{category:h,...f}=i;t={...f}}v!==null&&v.classList.remove("selectedCategoryBtn"),u.target.classList.add("selectedCategoryBtn"),v=u.target,n(t,!0)}};return m.useEffect(()=>{const u=document.querySelector(".catalogCategories").childNodes;v=B("All Categories",u),v.classList.add("selectedCategoryBtn")},[]),m.useEffect(()=>{v&&document.querySelector(".selectedCategoryBtn")&&(document.querySelector(".selectedCategoryBtn").classList.remove("selectedCategoryBtn"),v.classList.add("selectedCategoryBtn"))},[v]),m.useEffect(()=>{const u=document.querySelector(".catalogCategories").childNodes;i!=null&&i.category?v=B(i.category[0]!=="*"?i.category[0]:"All Categories",u):v=B("All Categories",u)},[i]),g("div",{className:"catalogHeader",children:[g("div",{className:"catalogCategoryName",children:[g("p",{children:["Women ",e.filters.category[0]==="*"?"Clothing":e.filters.category]}),e.filters.name?g("p",{className:"catalogHeaderSearchValue",children:["Search result for: ",e.filters.name]}):""]}),a("div",{className:"catalogCategories",children:G.map((u,h)=>u===(i==null?void 0:i.category)?a("button",{className:"selectedCategoryBtn",onClick:c,children:u},h):a("button",{onClick:c,children:u},h))}),g("div",{className:"catalogFilterAndAmountContainer",children:[a("div",{className:"catalogProductAmount",children:g("p",{children:[e.rawSearchData.length," Products"]})}),d&&g("button",{className:"catalogFilter",ref:r,children:[a("img",{src:H}),"Filter"]})]}),d&&a(X,{filtersBtn:r,urlParams:i}),!d&&a(J,{})]})}const D=["name","category","range","sale","color","size"];function P(s){let e;const n=[];if(s.length>10){e=Math.ceil(s.length/10);for(let o=0;o<e;o++){let i=[],t=o===0?1:o+1,l=o*10;for(l;l<=t*10&&!(l>=t*10||l+1>s.length);l++)i.push(s[l]);n.push(i)}}else{let o=[],i=1;for(let t=0;t<=i*10&&!(t>=i*10||t+1>s.length);t++)o.push(s[t]);n.push(o)}return n}function ee(){const s=w(),e=L(),n=b(e),[o,i]=m.useState({filters:{name:n==null?void 0:n.searchValue,category:[["*"]]},rawSearchData:N({name:n==null?void 0:n.searchValue,category:["*"]},F),searchData:P(N({name:n==null?void 0:n.searchValue,category:[["*"]]},F)),catalogPage:1});return m.useEffect(()=>{const t=b(e),l={};for(const r in t)for(const d in D)if(r===D[d]){l[r]=t[r];break}Object.keys(l).length!==0?(console.log("Result: ",N({...l},F),{...l}),i({...o,filters:l.category?{...l}:{...l,category:["*"]},rawSearchData:N({...l},F),searchData:P(N({...l},F)),catalogPage:1})):(i({filters:{name:t==null?void 0:t.searchValue,category:["*"]},rawSearchData:N({name:t==null?void 0:t.searchValue,category:["*"]},F),searchData:P(N({name:t==null?void 0:t.searchValue,category:["*"]},F)),catalogPage:1}),s("/catalog"))},[e.search]),a(E,{children:a("div",{className:"websiteContent",children:g("div",{className:"catalogContainer",children:[a(K,{catalogData:o,setCatalogData:i,searchValue:n==null?void 0:n.searchValue}),a($,{catalogData:o,setCatalogData:i,searchValue:n==null?void 0:n.searchValue}),a(q,{catalogData:o,setCatalogData:i})]})})})}export{ee as default};
