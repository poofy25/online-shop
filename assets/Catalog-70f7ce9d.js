import{a,F as p,j as g,r as u,g as B,h as b,u as D,f as F}from"./index-09923b73.js";import{s as m,J as h}from"./filter-d07eb3c7.js";import{P as S}from"./Product-f205b542.js";function k(c){const e=c.catalogData.searchData[c.catalogData.catalogPage-1];return e?a(p,{children:a("div",{className:"catalogProductsContainer",children:c.catalogData.searchData.length>0?e.map((n,t)=>a("div",{className:"catalogProduct",children:a(S,{product_object:n})},t)):a("p",{children:"NO PRODUCTS WERE FOUND"})})}):a("p",{children:"damn"})}function E(c){const e=c.catalogData,n=c.setCatalogData,t=()=>{e.catalogPage>1&&(n({...e,catalogPage:e.catalogPage-1}),document.documentElement.scrollTop=0)},l=()=>{e.catalogPage<e.searchData.length&&(n({...e,catalogPage:e.catalogPage+1}),document.documentElement.scrollTop=0)},o=r=>{r.target.textContent!=e.catalogPage&&(n({...e,catalogPage:Number(r.target.textContent)}),document.documentElement.scrollTop=0)};for(let r=0;r<document.querySelectorAll(".numberedBtns").length;r++)document.querySelectorAll(".numberedBtns")[r].textContent==e.catalogPage?document.querySelectorAll(".numberedBtns")[r].classList.add("deactivateNumberedBtn"):document.querySelectorAll(".numberedBtns")[r].classList.remove("deactivateNumberedBtn");return g("div",{className:"catalogPagesNavigatorContainer",children:[a("button",{onClick:t,className:`movingBtns ${e.catalogPage===1?"deactivateMovingBtn":""}`,children:"<"}),a("button",{onClick:o,className:"numberedBtns",children:1}),e.searchData.length<4?e.searchData.map((r,s)=>{if(!(s===0||e.searchData.length===1))return a("button",{onClick:o,className:"numberedBtns",children:s+1},s)}):e.searchData.map((r,s)=>{if(!(e.searchData.length===1||s===e.searchData.length-1))return a("button",{onClick:o,className:"numberedBtns",children:s+2},s)}),a("button",{onClick:l,className:`movingBtns ${e.catalogPage===e.searchData.length?"deactivateMovingBtn":""}`,children:">"})]})}const w="/online-shop/assets/filterIcon-2a7d15cc.png";function C(c){return a("div",{className:"catalogFilterBtn",children:g("div",{className:"catalogFilterBtnContainer",children:[a("p",{children:c.name}),g("button",{className:"filterArrowBtn",children:[a("div",{}),a("div",{})]})]})})}function A(c){return a("div",{className:"viewItemsContainer",children:a("button",{onClick:()=>{c.closeFilterMenu(!1)},children:"VIEW ITEMS"})})}function V(c){const e=c.filtersBtn.current,n=u.useRef(null),[t,l]=u.useState(!1);return e&&(e.onclick=()=>{l(!t)}),u.useEffect(()=>{t?(n.current.classList.add("active"),document.body.style.overflow="hidden"):(n.current.classList.remove("active"),document.body.style.overflow="auto")},[t]),g("div",{className:"catalogFilters",ref:n,children:[a("div",{className:"catalogFiltersShadow",onClick:()=>{l(!1)}}),a("div",{className:"catalogFilterHeader",children:a("p",{children:"FILTER"})}),g("div",{className:"catalogFilterOptions",children:[a(C,{name:"Brand"}),a(C,{name:"Category"}),a(C,{name:"Color"}),a(C,{name:"Size"}),a(C,{name:"Price"})]}),a(A,{closeFilterMenu:l})]})}const L=["All Categories","Shirts","Dresses","Jeans","Sportswear","Coats","Tops","Hoodies","Leggings","Trousers"];let d=null;const N=(c,e)=>{for(var n=0;n<e.length;n++)if(e[n].textContent==c)return e[n];return"nothing"};function H(c){const e=c.catalogData,n=B(),t=b(),l=Object.fromEntries(new URLSearchParams(t.search));let o,r;const s=u.useRef(null),f=i=>{d!==i.target&&(r=i.target.textContent==="All Categories"?"*":i.target.textContent,o={category:r},d!==null&&d.classList.remove("selectedCategoryBtn"),i.target.classList.add("selectedCategoryBtn"),d=i.target,n(o,!0))};return u.useEffect(()=>{d=document.querySelector(".selectedCategoryBtn")},[]),u.useEffect(()=>{const i=document.querySelector(".catalogCategories").childNodes;l.category?d=N(l.category!=="*"?l.category:"All Categories",i):d=N("All Categories",i)},[l]),g("div",{className:"catalogHeader",children:[g("div",{className:"catalogCategoryName",children:[g("p",{children:["Women ",e.filters.category==="*"?"Clothing":e.filters.category]}),e.filters.name?g("p",{className:"catalogHeaderSearchValue",children:["Search result for: ",e.filters.name]}):""]}),a("div",{className:"catalogCategories",children:L.map((i,v)=>v===0&&!l.category?a("button",{className:"selectedCategoryBtn",onClick:f,children:i},v):i===l.category?a("button",{className:"selectedCategoryBtn",onClick:f,children:i},v):a("button",{onClick:f,children:i},v))}),g("div",{className:"catalogFilterAndAmountContainer",children:[a("div",{className:"catalogProductAmount",children:g("p",{children:[e.rawSearchData.length," Products"]})}),g("button",{className:"catalogFilter",ref:s,children:[a("img",{src:w}),"Filter"]})]}),a(V,{filtersBtn:s})]})}const P=["name","category","price","color","size"];function y(c){let e;const n=[];if(c.length>10){e=Math.ceil(c.length/10);for(let t=0;t<e;t++){let l=[],o=t===0?1:t+1,r=t*10;for(r;r<=o*10&&!(r>=o*10||r+1>c.length);r++)l.push(c[r]);n.push(l)}}else{let t=[],l=1;for(let o=0;o<=l*10&&!(o>=l*10||o+1>c.length);o++)t.push(c[o]);n.push(t)}return n}function j(){const c=D(),e=F(),n=b(),[t,l]=u.useState({filters:{name:e.searchValue,category:"*"},rawSearchData:m({name:e.searchValue,category:"*"},h),searchData:y(m({name:e.searchValue,category:"*"},h)),catalogPage:1});return u.useEffect(()=>{const o=Object.fromEntries(new URLSearchParams(n.search)),r={};for(const s in o)for(const f in P)if(s===P[f]){r[s]=o[s];break}Object.keys(r).length!==0?l({...t,filters:{...t.filters,...r},rawSearchData:m({...t.filters,...r},h),searchData:y(m({...t.filters,...r},h)),catalogPage:1}):(l({filters:{name:o.searchValue,category:"*"},rawSearchData:m({name:o.searchValue,category:"*"},h),searchData:y(m({name:o.searchValue,category:"*"},h)),catalogPage:1}),c("/catalog"))},[n.search]),a(p,{children:g("div",{className:"websiteContent",children:[a(H,{catalogData:t,setCatalogData:l,searchValue:e.searchValue}),a(k,{catalogData:t,setCatalogData:l,searchValue:e.searchValue}),a(E,{catalogData:t,setCatalogData:l})]})})}export{j as default};
