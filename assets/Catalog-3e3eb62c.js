import{a,F as E,j as u,r as g,g as A,h as P,u as T}from"./index-f86dccb1.js";import{s as N,J as F}from"./filter-82ad5ad8.js";import{P as w}from"./Product-3562fe10.js";const b=function(s){if(s.search){const l=decodeURI(s.search).split("&"),o=Object();for(let i=0;i<l.length;i++){const t=l[i].split("=");t[1]=t[1].replace("%3D","="),t[0]=t[0].replace("?",""),typeof o[t[0]]>"u"?o[t[0]]=[t[1]]:o[t[0]].push(t[1])}return o}else return null};function x(s){const e=s.catalogData.searchData[s.catalogData.catalogPage-1];return e?a(E,{children:a("div",{className:"catalogProductsContainer",children:s.catalogData.searchData.length>0?e.map((l,o)=>a("div",{className:"catalogProduct",children:a(w,{product_object:l})},o)):a("p",{children:"NO PRODUCTS WERE FOUND"})})}):a("p",{children:"damn"})}function $(s){const e=s.catalogData,l=s.setCatalogData,o=()=>{e.catalogPage>1&&(l({...e,catalogPage:e.catalogPage-1}),document.documentElement.scrollTop=0)},i=()=>{e.catalogPage<e.searchData.length&&(l({...e,catalogPage:e.catalogPage+1}),document.documentElement.scrollTop=0)},t=r=>{r.target.textContent!=e.catalogPage&&(l({...e,catalogPage:Number(r.target.textContent)}),document.documentElement.scrollTop=0)};for(let r=0;r<document.querySelectorAll(".numberedBtns").length;r++)document.querySelectorAll(".numberedBtns")[r].textContent==e.catalogPage?document.querySelectorAll(".numberedBtns")[r].classList.add("deactivateNumberedBtn"):document.querySelectorAll(".numberedBtns")[r].classList.remove("deactivateNumberedBtn");return u("div",{className:"catalogPagesNavigatorContainer",children:[a("button",{onClick:o,className:`movingBtns ${e.catalogPage===1?"deactivateMovingBtn":""}`,children:"<"}),a("button",{onClick:t,className:"numberedBtns",children:1}),e.searchData.length<4?e.searchData.map((r,c)=>{if(!(c===0||e.searchData.length===1))return a("button",{onClick:t,className:"numberedBtns",children:c+1},c)}):e.searchData.map((r,c)=>{if(!(e.searchData.length===1||c===e.searchData.length-1))return a("button",{onClick:t,className:"numberedBtns",children:c+2},c)}),a("button",{onClick:i,className:`movingBtns ${e.catalogPage===e.searchData.length?"deactivateMovingBtn":""}`,children:">"})]})}const q="/online-shop/assets/filterIcon-2a7d15cc.png";function H(s){const e=s.option,l=s.filters,[o,i]=g.useState(),t=()=>{s.setOptionSelected({name:e.name,element:e.element,data:e==null?void 0:e.data})};return g.useEffect(()=>{l[e.name.toLowerCase()]?i(l[e.name.toLowerCase()].toString().replaceAll(","," , ")):(l.range||l.sale)&&e.name==="Price"?(l.range&&(l.range[0]===">="?i(`Over ${l.range[1]}$`):i(`Under ${l.range[1]}$`)),l.sale&&i(o?r=>`${r} , On sale`:"On sale")):i(null)},[l]),a("div",{className:"catalogFilterBtn",onClick:t,children:u("div",{className:"catalogFilterBtnContainer",children:[u("div",{className:"catalogFilterBtnContainerWrapper",children:[a("p",{children:e==null?void 0:e.name}),u("button",{className:"filterArrowBtn",children:[a("div",{}),a("div",{})]})]}),o&&a("div",{className:"selectedDataContainer",children:o})]})})}function O(s){return a("div",{className:"viewItemsContainer",children:a("button",{onClick:()=>{s.closeFilterMenu(!1)},children:"VIEW ITEMS"})})}function R(s){const e=s.filters,l=s.setFilters,o=s.data,i=(t,r)=>{e.color?e.color.indexOf(r)===-1?(t.currentTarget.classList.add("selected"),l(c=>({...c,color:[r,...c.color]}))):(t.currentTarget.classList.remove("selected"),l(c=>{if(c.color.filter(d=>d!==r).length===0){const{color:d,...n}=c;return n}return{...c,color:c.color.filter(d=>d!==r)}})):(t.currentTarget.classList.add("selected"),l(c=>({...c,color:[r]})))};return a("div",{className:"filterOptionContaianer",children:o.map((t,r)=>{var d;let c=!1;return((d=e==null?void 0:e.color)==null?void 0:d.indexOf(t.name))!==-1&&e.color&&(c=!0),a("div",{className:`filterOptionBtn ${c&&"selected"} `,onClick:n=>{i(n,t.name)},children:u("div",{className:"filterOptionBtnContainer",children:[a("div",{style:{backgroundColor:t.value},className:"colorDiv"}),a("p",{children:t.name}),a("div",{className:"check"})]})},r)})})}function I(s){const e=s.filters,l=s.setFilters,o=s.data,i=(t,r)=>{e.category?e.category.indexOf(r)===-1?(t.currentTarget.classList.add("selected"),l(c=>({...c,category:[r]}))):(t.currentTarget.classList.remove("selected"),l(c=>{if(c.category.filter(d=>d!==r).length===0){const{category:d,...n}=c;return n}return{...c,category:c.category.filter(d=>d!==r)}})):(t.currentTarget.classList.add("selected"),l(c=>({...c,category:[r]})))};return a("div",{className:"filterOptionContaianer",children:o.map((t,r)=>{var d;let c=!1;return((d=e==null?void 0:e.category)==null?void 0:d.indexOf(t.name))!==-1&&e.category&&(c=!0),a("div",{className:`filterOptionBtn ${c&&"selected"} `,onClick:n=>{i(n,t.name)},children:u("div",{className:"filterOptionBtnContainer",children:[a("p",{children:t.name}),a("div",{className:"check"})]})},r)})})}function V(s){const e=s.filters,l=s.setFilters,o=g.useRef(null),i=g.useRef(!1),[t,r]=g.useState(e!=null&&e.range?[e.range[0],e.range[1]]:[">=","5"]),c=n=>{e!=null&&e.sale?(n.currentTarget.classList.remove("selected"),l(h=>{const{sale:m,...v}=h;return{...v}})):(n.currentTarget.classList.add("selected"),l(h=>({...h,sale:!0})))},d=(n,h)=>{document.querySelector(".priceBtn.active").classList.remove("active"),n.currentTarget.classList.add("active"),r(m=>{const v=[...m];return v[0]=h,v})};return g.useEffect(()=>{i.current===!0?(o.current.textContent=`${t[1]}$`,l(n=>({...n,range:t}))):i.current=!0},[t]),g.useEffect(()=>{document.getElementById("priceInput").value=e!=null&&e.range?e==null?void 0:e.range[1]:"5"},[]),u("div",{className:"filterOptionContaianer",children:[a("div",{className:`filterOptionBtn ${(e==null?void 0:e.sale)!==!1&&(e==null?void 0:e.sale)&&"selected"} `,onClick:n=>{c(n,e.sale)},children:u("div",{className:"filterOptionBtnContainer",children:[a("p",{children:"Sale"}),a("div",{className:"check"})]})}),a("div",{className:"filterOptionBtn",children:u("div",{className:"filterOptionBtnContainer price",children:[u("div",{className:"priceWrapper",children:[a("button",{className:`priceBtn ${e!=null&&e.range?(e==null?void 0:e.range[0])===">="&&"active":"active"}`,onClick:n=>{d(n,">=")},children:"Over"}),u("p",{ref:o,children:[e!=null&&e.range?e.range[1]:t[1],"$"]}),a("button",{className:`priceBtn ${(e==null?void 0:e.range)&&(e==null?void 0:e.range[0])==="<="&&"active"}`,onClick:n=>{d(n,"<=")},children:"Under"})]}),u("div",{className:"inputWrapper",children:[a("input",{type:"range",id:"priceInput",min:"5",max:"250",step:"5",list:"tickmarks",onChange:()=>{r(n=>{const h=[...n];return h[1]=document.getElementById("priceInput").value,h})}}),u("datalist",{id:"tickmarks",children:[a("option",{value:"5",label:"5$"}),a("option",{value:"250",label:"250$"})]})]})]})})]})}function z(s){const e=s.filters,l=s.setFilters,o=s.data,i=(t,r)=>{e.size?e.size.indexOf(r)===-1?(t.currentTarget.classList.add("selected"),l(c=>({...c,size:[r,...c.size]}))):(t.currentTarget.classList.remove("selected"),l(c=>{if(c.size.filter(d=>d!==r).length===0){const{size:d,...n}=c;return n}return{...c,size:c.size.filter(d=>d!==r)}})):(t.currentTarget.classList.add("selected"),l(c=>({...c,size:[r]})))};return a("div",{className:"filterOptionContaianer",children:o.map((t,r)=>{var d;let c=!1;return((d=e==null?void 0:e.size)==null?void 0:d.indexOf(t.name))!==-1&&e.size&&(c=!0),a("div",{className:`filterOptionBtn ${c&&"selected"} `,onClick:n=>{i(n,t.name)},children:u("div",{className:"filterOptionBtnContainer",children:[a("p",{children:t.name}),a("div",{className:"check"})]})},r)})})}const j=[{name:"Red",value:"rgb(255,0,0)"},{name:"Brown",value:"rgb(165, 42, 42)"},{name:"Khaki",value:"rgb(240, 230, 140)"},{name:"Yellow",value:"rgb(255,255,0)"},{name:"Olive",value:"rgb(128,128,0)"},{name:"Green",value:"rgb(0,255,0)"},{name:"Light blue",value:"rgb(173, 216, 230)"},{name:"Blue",value:"rgb(0, 0, 255)"},{name:"Navy",value:"rgb(0, 0, 128)"},{name:"Purple",value:"rgb(128, 0, 128)"},{name:"Pink",value:"rgb(255, 192, 203)"},{name:"Black",value:"rgb(0,0,0)"},{name:"Gray",value:"rgb(128, 128, 128)"},{name:"Beige",value:"rgb(245, 245, 220)"},{name:"White",value:"rgb(255,255,255)"}],M=[{name:"Shirts"},{name:"Dresses"},{name:"Jeans"},{name:"Sportswear"},{name:"Coats"},{name:"Tops"},{name:"Hoodies"},{name:"Leggings"},{name:"Trousers"}],U=[{name:"XXS"},{name:"XS"},{name:"S"},{name:"M"},{name:"L"},{name:"XL"},{name:"XXL"}];let W=[{name:"Category",element:a(I,{}),data:M},{name:"Color",element:a(R,{}),data:j},{name:"Size",element:a(z,{}),data:U},{name:"Price",element:a(V,{})}];function X(s){var k,S;const e=s.filtersBtn.current,l=A(),o=g.useRef(null),i=P(),t=g.useRef(!1),r=b(i),[c,d]=g.useState(!1),[n,h]=g.useState(null),[m,v]=g.useState({...r});return e&&(e.onclick=()=>{d(!c)}),g.useEffect(()=>{m!==s.urlParams&&v({...s.urlParams})},[s.urlParams]),g.useEffect(()=>{t.current?c?(o.current.classList.add("on"),document.body.style.overflow="hidden",h(null)):(o.current.classList.remove("on"),document.body.style.overflow="auto",m&&l(m)):t.current=!0},[c]),g.useEffect(()=>{n!==null&&(document.querySelector(".catalogFiltersSecond").classList.add("Active"),document.querySelector(".catalogFiltersFirst").classList.remove("Active")),n===null&&(document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"))},[n]),u("div",{className:"catalogFilterMenu",ref:o,children:[u("div",{className:"catalogFiltersContainer",children:[u("div",{className:"catalogFiltersFirst",children:[a("div",{className:"catalogFilterHeader",children:a("p",{children:"FILTER"})}),a("div",{className:"catalogFilterOptions",children:W.map((C,y)=>a(H,{option:{...C},setOptionSelected:h,filters:m},y))}),a(O,{closeFilterMenu:d})]}),u("div",{className:"catalogFiltersSecond",children:[u("div",{className:"catalogFilterHeader",children:[u("button",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{h(null)},500)},children:[a("div",{}),a("div",{})]}),a("p",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{h(null)},500)},children:(k=n==null?void 0:n.name)==null?void 0:k.toUpperCase()}),(n==null?void 0:n.name)!=="Price"?a("button",{className:"selectionBtn",onClick:()=>{var C,y;if(m[(C=n==null?void 0:n.name)==null?void 0:C.toLowerCase()]){const p={...m};delete p[(y=n==null?void 0:n.name)==null?void 0:y.toLowerCase()],v(p)}},children:m[(S=n==null?void 0:n.name)==null?void 0:S.toLowerCase()]&&a("p",{children:"CLEAR"})}):a("button",{className:"selectionBtn",onClick:()=>{if(m.sale||m.range){const C={...m};delete C.range,delete C.sale,v(C)}},children:m.sale&&a("p",{children:"CLEAR"})||m.range&&a("p",{children:"CLEAR"})})]}),a("div",{className:"catalogFilterOptions",children:(n==null?void 0:n.element)&&g.cloneElement(n==null?void 0:n.element,{setFilters:v,filters:m,data:n==null?void 0:n.data})}),a(O,{closeFilterMenu:d})]})]}),a("div",{className:"catalogFiltersShadow",onClick:()=>{d(!1)}})]})}const J=["All Categories","Shirts","Dresses","Jeans","Sportswear","Coats","Tops","Hoodies","Leggings","Trousers"];let f=null;const B=(s,e)=>{for(var l=0;l<e.length;l++)if(e[l].textContent==s)return e[l];return"nothing"};function G(s){const e=s.catalogData,l=A(),o=P(),i=b(o);let t,r;const c=g.useRef(null),d=n=>{if(f!==n.target){if(r=n.target.textContent==="All Categories"?"*":n.target.textContent,r!=="*")t={...i,category:[r]};else{const{category:h,...m}=i;t={...m}}f!==null&&f.classList.remove("selectedCategoryBtn"),n.target.classList.add("selectedCategoryBtn"),f=n.target,l(t,!0)}};return g.useEffect(()=>{const n=document.querySelector(".catalogCategories").childNodes;f=B("All Categories",n),f.classList.add("selectedCategoryBtn")},[]),g.useEffect(()=>{f&&document.querySelector(".selectedCategoryBtn")&&(document.querySelector(".selectedCategoryBtn").classList.remove("selectedCategoryBtn"),f.classList.add("selectedCategoryBtn"))},[f]),g.useEffect(()=>{const n=document.querySelector(".catalogCategories").childNodes;i!=null&&i.category?f=B(i.category[0]!=="*"?i.category[0]:"All Categories",n):f=B("All Categories",n)},[i]),u("div",{className:"catalogHeader",children:[u("div",{className:"catalogCategoryName",children:[u("p",{children:["Women ",e.filters.category[0]==="*"?"Clothing":e.filters.category]}),e.filters.name?u("p",{className:"catalogHeaderSearchValue",children:["Search result for: ",e.filters.name]}):""]}),a("div",{className:"catalogCategories",children:J.map((n,h)=>n===(i==null?void 0:i.category)?a("button",{className:"selectedCategoryBtn",onClick:d,children:n},h):a("button",{onClick:d,children:n},h))}),u("div",{className:"catalogFilterAndAmountContainer",children:[a("div",{className:"catalogProductAmount",children:u("p",{children:[e.rawSearchData.length," Products"]})}),u("button",{className:"catalogFilter",ref:c,children:[a("img",{src:q}),"Filter"]})]}),a(X,{filtersBtn:c,urlParams:i})]})}const D=["name","category","range","sale","color","size"];function L(s){let e;const l=[];if(s.length>10){e=Math.ceil(s.length/10);for(let o=0;o<e;o++){let i=[],t=o===0?1:o+1,r=o*10;for(r;r<=t*10&&!(r>=t*10||r+1>s.length);r++)i.push(s[r]);l.push(i)}}else{let o=[],i=1;for(let t=0;t<=i*10&&!(t>=i*10||t+1>s.length);t++)o.push(s[t]);l.push(o)}return l}function Q(){const s=T(),e=P(),l=b(e),[o,i]=g.useState({filters:{name:l==null?void 0:l.searchValue,category:[["*"]]},rawSearchData:N({name:l==null?void 0:l.searchValue,category:["*"]},F),searchData:L(N({name:l==null?void 0:l.searchValue,category:[["*"]]},F)),catalogPage:1});return g.useEffect(()=>{const t=b(e),r={};for(const c in t)for(const d in D)if(c===D[d]){r[c]=t[c];break}Object.keys(r).length!==0?(console.log("Result: ",N({...r},F),{...r}),i({...o,filters:r.category?{...r}:{...r,category:["*"]},rawSearchData:N({...r},F),searchData:L(N({...r},F)),catalogPage:1})):(i({filters:{name:t==null?void 0:t.searchValue,category:["*"]},rawSearchData:N({name:t==null?void 0:t.searchValue,category:["*"]},F),searchData:L(N({name:t==null?void 0:t.searchValue,category:["*"]},F)),catalogPage:1}),s("/catalog"))},[e.search]),a(E,{children:u("div",{className:"websiteContent",children:[a(G,{catalogData:o,setCatalogData:i,searchValue:l==null?void 0:l.searchValue}),a(x,{catalogData:o,setCatalogData:i,searchValue:l==null?void 0:l.searchValue}),a($,{catalogData:o,setCatalogData:i})]})})}export{Q as default};
