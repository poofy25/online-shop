import{a as t,F as O,j as u,r as g,g as x,h as $,u as q,f as I}from"./index-29530c09.js";import{s as y,J as b}from"./filter-d07eb3c7.js";import{P as V}from"./Product-3a7a4b52.js";function R(l){const e=l.catalogData.searchData[l.catalogData.catalogPage-1];return e?t(O,{children:t("div",{className:"catalogProductsContainer",children:l.catalogData.searchData.length>0?e.map((c,s)=>t("div",{className:"catalogProduct",children:t(V,{product_object:c})},s)):t("p",{children:"NO PRODUCTS WERE FOUND"})})}):t("p",{children:"damn"})}function z(l){const e=l.catalogData,c=l.setCatalogData,s=()=>{e.catalogPage>1&&(c({...e,catalogPage:e.catalogPage-1}),document.documentElement.scrollTop=0)},i=()=>{e.catalogPage<e.searchData.length&&(c({...e,catalogPage:e.catalogPage+1}),document.documentElement.scrollTop=0)},a=n=>{n.target.textContent!=e.catalogPage&&(c({...e,catalogPage:Number(n.target.textContent)}),document.documentElement.scrollTop=0)};for(let n=0;n<document.querySelectorAll(".numberedBtns").length;n++)document.querySelectorAll(".numberedBtns")[n].textContent==e.catalogPage?document.querySelectorAll(".numberedBtns")[n].classList.add("deactivateNumberedBtn"):document.querySelectorAll(".numberedBtns")[n].classList.remove("deactivateNumberedBtn");return u("div",{className:"catalogPagesNavigatorContainer",children:[t("button",{onClick:s,className:`movingBtns ${e.catalogPage===1?"deactivateMovingBtn":""}`,children:"<"}),t("button",{onClick:a,className:"numberedBtns",children:1}),e.searchData.length<4?e.searchData.map((n,r)=>{if(!(r===0||e.searchData.length===1))return t("button",{onClick:a,className:"numberedBtns",children:r+1},r)}):e.searchData.map((n,r)=>{if(!(e.searchData.length===1||r===e.searchData.length-1))return t("button",{onClick:a,className:"numberedBtns",children:r+2},r)}),t("button",{onClick:i,className:`movingBtns ${e.catalogPage===e.searchData.length?"deactivateMovingBtn":""}`,children:">"})]})}const M="/online-shop/assets/filterIcon-2a7d15cc.png";function j(l){const e=l.option,c=l.filters,[s,i]=g.useState(),a=()=>{console.log(c==null?void 0:c.price),l.setOptionSelected({name:e.name,element:e.element,data:e==null?void 0:e.data})};return g.useEffect(()=>{var n,r;c[e.name.toLowerCase()]&&(e.name==="Price"?(c.price.range&&(c.price.range.dir===">="?i(`Over ${(n=c.price)==null?void 0:n.range.amount}$`):i(`Under ${(r=c.price)==null?void 0:r.range.amount}$`)),c.price.sale&&i(s?o=>`${o} , On sale`:"On sale")):i(c[e.name.toLowerCase()].toString().replaceAll(","," , "))),console.log(s)},[c]),t("div",{className:"catalogFilterBtn",onClick:a,children:u("div",{className:"catalogFilterBtnContainer",children:[u("div",{className:"catalogFilterBtnContainerWrapper",children:[t("p",{children:e==null?void 0:e.name}),u("button",{className:"filterArrowBtn",children:[t("div",{}),t("div",{})]})]}),s&&t("div",{className:"selectedDataContainer",children:s})]})})}function w(l){return t("div",{className:"viewItemsContainer",children:t("button",{onClick:()=>{l.closeFilterMenu(!1)},children:"VIEW ITEMS"})})}function U(l){const e=l.filters,c=l.setFilters,s=l.data,i=(a,n)=>{e.color?e.color.indexOf(n)===-1?(a.currentTarget.classList.add("selected"),c(r=>({...r,color:[n,...r.color]}))):(a.currentTarget.classList.remove("selected"),c(r=>{if(r.color.filter(o=>o!==n).length===0){const{color:o,...d}=r;return d}return{...r,color:r.color.filter(o=>o!==n)}})):(a.currentTarget.classList.add("selected"),c(r=>({...r,color:[n]})))};return t("div",{className:"filterOptionContaianer",children:s.map((a,n)=>{var o;let r=!1;return((o=e==null?void 0:e.color)==null?void 0:o.indexOf(a.name))!==-1&&e.color&&(r=!0),t("div",{className:`filterOptionBtn ${r&&"selected"} `,onClick:d=>{i(d,a.name)},children:u("div",{className:"filterOptionBtnContainer",children:[t("div",{style:{backgroundColor:a.value},className:"colorDiv"}),t("p",{children:a.name}),t("div",{className:"check"})]})},n)})})}function W(l){const e=l.filters,c=l.setFilters,s=l.data,i=(a,n)=>{e.category?e.category.indexOf(n)===-1?(a.currentTarget.classList.add("selected"),c(r=>({...r,category:[n,...r.category]}))):(a.currentTarget.classList.remove("selected"),c(r=>{if(r.category.filter(o=>o!==n).length===0){const{category:o,...d}=r;return d}return{...r,category:r.category.filter(o=>o!==n)}})):(a.currentTarget.classList.add("selected"),c(r=>({...r,category:[n]})))};return t("div",{className:"filterOptionContaianer",children:s.map((a,n)=>{var o;let r=!1;return((o=e==null?void 0:e.category)==null?void 0:o.indexOf(a.name))!==-1&&e.category&&(r=!0),t("div",{className:`filterOptionBtn ${r&&"selected"} `,onClick:d=>{i(d,a.name)},children:u("div",{className:"filterOptionBtnContainer",children:[t("p",{children:a.name}),t("div",{className:"check"})]})},n)})})}function X(l){var d,h,C,p,B,v,k,P,L;const e=l.filters,c=l.setFilters,s=g.useRef(null),i=g.useRef(!1),[a,n]=g.useState((d=e==null?void 0:e.price)!=null&&d.range?{dir:e.price.range.dir,amount:e.price.range.amount}:{dir:">=",amount:"5"}),r=m=>{var N;(N=e==null?void 0:e.price)!=null&&N.sale?(m.currentTarget.classList.remove("selected"),c(f=>{const{price:H,...D}=f,{sale:ae,...E}=H;return{...Object.keys(E).length===0?{...D}:{...D,price:{...E}}}})):(m.currentTarget.classList.add("selected"),c(f=>({...f,price:{...f==null?void 0:f.price,sale:!0}})))},o=(m,N)=>{document.querySelector(".priceBtn.active").classList.remove("active"),m.currentTarget.classList.add("active"),n({...a,dir:N})};return g.useEffect(()=>{i.current===!0?(s.current.textContent=`${a.amount}$`,c(m=>({...m,price:{...m==null?void 0:m.price,range:a}}))):i.current=!0},[a]),g.useEffect(()=>{var m,N,f;document.getElementById("priceInput").value=(m=e==null?void 0:e.price)!=null&&m.range?(f=(N=e==null?void 0:e.price)==null?void 0:N.range)==null?void 0:f.amount:"5"},[]),u("div",{className:"filterOptionContaianer",children:[t("div",{className:`filterOptionBtn ${((h=e==null?void 0:e.price)==null?void 0:h.sale)!==!1&&((C=e==null?void 0:e.price)==null?void 0:C.sale)&&"selected"} `,onClick:m=>{r(m,e.sale)},children:u("div",{className:"filterOptionBtnContainer",children:[t("p",{children:"Sale"}),t("div",{className:"check"})]})}),t("div",{className:"filterOptionBtn",children:u("div",{className:"filterOptionBtnContainer price",children:[u("div",{className:"priceWrapper",children:[t("button",{className:`priceBtn ${(p=e==null?void 0:e.price)!=null&&p.range?((v=(B=e==null?void 0:e.price)==null?void 0:B.range)==null?void 0:v.dir)===">="&&"active":"active"}`,onClick:m=>{o(m,">=")},children:"Over"}),u("p",{ref:s,children:[(k=e==null?void 0:e.price)!=null&&k.range?e.price.range.amount:a.amount,"$"]}),t("button",{className:`priceBtn ${((L=(P=e==null?void 0:e.price)==null?void 0:P.range)==null?void 0:L.dir)==="<="&&"active"}`,onClick:m=>{o(m,"<=")},children:"Under"})]}),u("div",{className:"inputWrapper",children:[t("input",{type:"range",id:"priceInput",min:"5",max:"250",step:"5",list:"tickmarks",onChange:()=>{n(m=>({...m,amount:document.getElementById("priceInput").value}))}}),u("datalist",{id:"tickmarks",children:[t("option",{value:"5",label:"5$"}),t("option",{value:"250",label:"250$"})]})]})]})})]})}function J(l){const e=l.filters,c=l.setFilters,s=l.data,i=(a,n)=>{e.size?e.size.indexOf(n)===-1?(a.currentTarget.classList.add("selected"),c(r=>({...r,size:[n,...r.size]}))):(a.currentTarget.classList.remove("selected"),c(r=>{if(r.size.filter(o=>o!==n).length===0){const{size:o,...d}=r;return d}return{...r,size:r.size.filter(o=>o!==n)}})):(a.currentTarget.classList.add("selected"),c(r=>({...r,size:[n]})))};return t("div",{className:"filterOptionContaianer",children:s.map((a,n)=>{var o;let r=!1;return((o=e==null?void 0:e.size)==null?void 0:o.indexOf(a.name))!==-1&&e.size&&(r=!0),t("div",{className:`filterOptionBtn ${r&&"selected"} `,onClick:d=>{i(d,a.name)},children:u("div",{className:"filterOptionBtnContainer",children:[t("p",{children:a.name}),t("div",{className:"check"})]})},n)})})}const G=[{name:"Red",value:"rgb(255,0,0)"},{name:"Brown",value:"rgb(165, 42, 42)"},{name:"Khaki",value:"rgb(240, 230, 140)"},{name:"Yellow",value:"rgb(255,255,0)"},{name:"Olive",value:"rgb(128,128,0)"},{name:"Green",value:"rgb(0,255,0)"},{name:"Light blue",value:"rgb(173, 216, 230)"},{name:"Blue",value:"rgb(0, 0, 255)"},{name:"Navy",value:"rgb(0, 0, 128)"},{name:"Purple",value:"rgb(128, 0, 128)"},{name:"Pink",value:"rgb(255, 192, 203)"},{name:"Black",value:"rgb(0,0,0)"},{name:"Gray",value:"rgb(128, 128, 128)"},{name:"Beige",value:"rgb(245, 245, 220)"},{name:"White",value:"rgb(255,255,255)"}],K=[{name:"Shirts"},{name:"Dresses"},{name:"Jeans"},{name:"Sportswear"},{name:"Coats"},{name:"Tops"},{name:"Hoodies"},{name:"Leggings"},{name:"Trousers"}],Y=[{name:"XXS"},{name:"XS"},{name:"S"},{name:"M"},{name:"L"},{name:"XL"},{name:"XXL"}];let _=[{name:"Category",element:t(W,{}),data:K},{name:"Color",element:t(U,{}),data:G},{name:"Size",element:t(J,{}),data:Y},{name:"Price",element:t(X,{})}];function Q(l){var d,h;const e=l.filtersBtn.current,c=g.useRef(null),[s,i]=g.useState(!1),[a,n]=g.useState(null),[r,o]=g.useState({});return e&&(e.onclick=()=>{i(!s)}),g.useEffect(()=>{console.log(r)},[r]),g.useEffect(()=>{s?(c.current.classList.add("on"),document.body.style.overflow="hidden",n(null)):(c.current.classList.remove("on"),document.body.style.overflow="auto",console.log(new URLSearchParams(r).toString()))},[s]),g.useEffect(()=>{a!==null&&(document.querySelector(".catalogFiltersSecond").classList.add("Active"),document.querySelector(".catalogFiltersFirst").classList.remove("Active")),a===null&&(document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"))},[a]),u("div",{className:"catalogFilterMenu",ref:c,children:[u("div",{className:"catalogFiltersContainer",children:[u("div",{className:"catalogFiltersFirst",children:[t("div",{className:"catalogFilterHeader",children:t("p",{children:"FILTER"})}),t("div",{className:"catalogFilterOptions",children:_.map((C,p)=>t(j,{option:{...C},setOptionSelected:n,filters:r},p))}),t(w,{closeFilterMenu:i})]}),u("div",{className:"catalogFiltersSecond",children:[u("div",{className:"catalogFilterHeader",children:[u("button",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{n(null)},500)},children:[t("div",{}),t("div",{})]}),t("p",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{n(null)},500)},children:(d=a==null?void 0:a.name)==null?void 0:d.toUpperCase()}),(a==null?void 0:a.name)!=="Price"&&t("button",{className:"selectionBtn",onClick:()=>{var C,p,B;if(r[(C=a==null?void 0:a.name)==null?void 0:C.toLowerCase()]){console.log("damn");const v={...r};delete v[(p=a==null?void 0:a.name)==null?void 0:p.toLowerCase()],o(v)}else{const v={...r},k=P=>{const L=[];return P.forEach(m=>{L.push(m.name)}),L};v[(B=a==null?void 0:a.name)==null?void 0:B.toLowerCase()]=k(a==null?void 0:a.data),console.log(v),o(v)}},children:r[(h=a==null?void 0:a.name)==null?void 0:h.toLowerCase()]?t("p",{children:"CLEAR"}):u(O,{children:[t("p",{children:"ALL"}),"  ",t("div",{className:"selectionBtnCheck"})]})})]}),t("div",{className:"catalogFilterOptions",children:(a==null?void 0:a.element)&&g.cloneElement(a==null?void 0:a.element,{setFilters:o,filters:r,data:a==null?void 0:a.data})}),t(w,{closeFilterMenu:i})]})]}),t("div",{className:"catalogFiltersShadow",onClick:()=>{i(!1)}})]})}const Z=["All Categories","Shirts","Dresses","Jeans","Sportswear","Coats","Tops","Hoodies","Leggings","Trousers"];let F=null;const A=(l,e)=>{for(var c=0;c<e.length;c++)if(e[c].textContent==l)return e[c];return"nothing"};function ee(l){const e=l.catalogData,c=x(),s=$(),i=Object.fromEntries(new URLSearchParams(s.search));let a,n;const r=g.useRef(null),o=d=>{F!==d.target&&(n=d.target.textContent==="All Categories"?"*":d.target.textContent,a={category:n},F!==null&&F.classList.remove("selectedCategoryBtn"),d.target.classList.add("selectedCategoryBtn"),F=d.target,c(a,!0))};return g.useEffect(()=>{F=document.querySelector(".selectedCategoryBtn")},[]),g.useEffect(()=>{const d=document.querySelector(".catalogCategories").childNodes;i.category?F=A(i.category!=="*"?i.category:"All Categories",d):F=A("All Categories",d)},[i]),u("div",{className:"catalogHeader",children:[u("div",{className:"catalogCategoryName",children:[u("p",{children:["Women ",e.filters.category==="*"?"Clothing":e.filters.category]}),e.filters.name?u("p",{className:"catalogHeaderSearchValue",children:["Search result for: ",e.filters.name]}):""]}),t("div",{className:"catalogCategories",children:Z.map((d,h)=>h===0&&!i.category?t("button",{className:"selectedCategoryBtn",onClick:o,children:d},h):d===i.category?t("button",{className:"selectedCategoryBtn",onClick:o,children:d},h):t("button",{onClick:o,children:d},h))}),u("div",{className:"catalogFilterAndAmountContainer",children:[t("div",{className:"catalogProductAmount",children:u("p",{children:[e.rawSearchData.length," Products"]})}),u("button",{className:"catalogFilter",ref:r,children:[t("img",{src:M}),"Filter"]})]}),t(Q,{filtersBtn:r})]})}const T=["name","category","price","color","size"];function S(l){let e;const c=[];if(l.length>10){e=Math.ceil(l.length/10);for(let s=0;s<e;s++){let i=[],a=s===0?1:s+1,n=s*10;for(n;n<=a*10&&!(n>=a*10||n+1>l.length);n++)i.push(l[n]);c.push(i)}}else{let s=[],i=1;for(let a=0;a<=i*10&&!(a>=i*10||a+1>l.length);a++)s.push(l[a]);c.push(s)}return c}function le(){const l=q(),e=I(),c=$(),[s,i]=g.useState({filters:{name:e.searchValue,category:"*"},rawSearchData:y({name:e.searchValue,category:"*"},b),searchData:S(y({name:e.searchValue,category:"*"},b)),catalogPage:1});return g.useEffect(()=>{const a=Object.fromEntries(new URLSearchParams(c.search)),n={};for(const r in a)for(const o in T)if(r===T[o]){n[r]=a[r];break}Object.keys(n).length!==0?i({...s,filters:{...s.filters,...n},rawSearchData:y({...s.filters,...n},b),searchData:S(y({...s.filters,...n},b)),catalogPage:1}):(i({filters:{name:a.searchValue,category:"*"},rawSearchData:y({name:a.searchValue,category:"*"},b),searchData:S(y({name:a.searchValue,category:"*"},b)),catalogPage:1}),l("/catalog"))},[c.search]),t(O,{children:u("div",{className:"websiteContent",children:[t(ee,{catalogData:s,setCatalogData:i,searchValue:e.searchValue}),t(R,{catalogData:s,setCatalogData:i,searchValue:e.searchValue}),t(z,{catalogData:s,setCatalogData:i})]})})}export{le as default};
