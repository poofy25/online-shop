import{u as d,j as s,a as t,s as N,p as h,b as r,r as p,F as v,Z as u,d as m,c as f,J as b,K as C}from"./index-a72b43f8.js";const S="/online-shop/assets/googleIcon-8edb2dab.png";function L(){return d(),s("div",{className:"signInContainer",children:[t("p",{children:"SIGN IN WITH..."}),s("button",{onClick:()=>{N(r,h).then(n=>{n.user.email;let e=n.user.displayName;localStorage.setItem("userName",e)}).catch(n=>{console.log(n)})},className:"googleBtn",children:[t("img",{src:S}),"GOOGLE"]})]})}function y(){let a=d();return s("div",{className:"signUpContainer",children:[t("p",{children:"SIGN UP WITH..."}),s("button",{onClick:()=>{N(r,h).then(e=>{let o=e.user.email,i=e.user.displayName;const l={userEmail:o,userName:i};return console.log(r.currentUser),localStorage.setItem("userName",i),a("/account"),console.log(l)}).catch(e=>{console.log(e)})},className:"googleBtn",children:[t("img",{src:S}),"GOOGLE"]})]})}const I={SignIn:t(L,{}),SignUp:t(y,{})};function B(){const[a,n]=p.useState(I.SignIn),e=o=>{document.querySelector(".activeBtn").classList.remove("activeBtn"),o.target.classList.add("activeBtn"),n(I[o.target.attributes.container.value])};return s("div",{className:"loginMenu",children:[s("div",{className:"loginBtns",children:[t("button",{className:"activeBtn",onClick:e,container:"SignIn",children:"SIGN IN"}),t("button",{onClick:e,container:"SignUp",children:"SIGN UP"})]}),t("div",{className:"loginMenuContent",children:a})]})}function G(){const a=d();return r.onAuthStateChanged(n=>{if(n&&n.displayName!==localStorage.getItem("userName")){async function e(){const o=u(m,`users/${n.uid}`);async function i(){const g={uid:n.uid,name:n.displayName,email:n.email,updatedAt:f()};try{await b(o,g,{merge:!0}),console.log("Loged in and sent data to db",g)}catch(c){console.error("Error adding document: ",c)}}await i();async function l(){const c=(await C(u(m,`users/${n.uid}`))).data();c.cartItems!==void 0&&localStorage.setItem("cartProducts",JSON.stringify(c.cartItems)),a("/account")}l()}e()}}),t(v,{children:t("div",{className:"websiteContent",children:t(B,{})})})}export{G as default};
