import{j as o,F as w,a as n,r as i,e as D,b as _,Z as L,d as E,J as $,c as k,f as B}from"./index-f484b7da.js";import{s as I,J as q}from"./filter-82ad5ad8.js";function J(r){const e=r.productData;return o(w,{children:[n("p",{className:"productPercentOff",children:e!=null&&e.discount?`Save ${e==null?void 0:e.discount.percentage}%`:""}),o("div",{className:"productPriceContainer",children:[n("p",{className:"productPrice",children:e!=null&&e.discount?"":"$"+(e==null?void 0:e.price)}),n("p",{className:"productPriceAfterDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.discount.price_after_discount):""}),n("p",{className:"productPriceBeforeDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.price):""})]})]})}function A(r){const e=r.productData,[a,t]=i.useState(e==null?void 0:e.colors[0]),d=s=>{t(s.target.attributes.btncolor.value),r.productCartData(c=>({...c,color:s.target.attributes.btncolor.value})),s.target.parentNode.childNodes.forEach(c=>{c.style.border="2px solid rgba(0, 0, 0 , 0.5)",c.style.boxShadow="none"}),s.target.style.border="2px solid white",s.target.style.boxShadow="0px 0px 0px 2px rgba(0, 0, 0,.75)"};return i.useEffect(()=>{t(e==null?void 0:e.colors[0])},[r.productData]),o("div",{className:"productColorsContainer",children:[o("p",{className:"productSelectedColor",children:["Color  ",o("span",{children:["- ",a]})]}),n("div",{className:"colorsBtns",children:e==null?void 0:e.colors.map((s,c)=>n("button",{style:{backgroundColor:s,boxShadow:c===0?"0px 0px 0px 2px rgba(0, 0, 0,.75)":"none",border:c===0?"2px solid white":"2px solid rgba(0, 0, 0 , 0.5)"},onClick:d,btncolor:s,children:s},s))})]})}function j(r){const e=r.productData,[a,t]=i.useState("Chose your size "),d=c=>{document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open")},s=c=>{t(c.target.textContent),r.productCartData(l=>({...l,size:c.target.textContent})),document.querySelector(".productSizesContainer").classList.remove("open")};return o("div",{className:"productSizesContainer",children:[n("p",{children:"Size"}),o("div",{className:"productSizesWrapper",children:[o("button",{className:"sizesBtn",onClick:d,children:[a,o("div",{className:"btnarrow",children:[n("div",{className:"leftarrow"}),n("div",{className:"rightarrow"})]})]}),n("div",{className:"sizesdropdownMenu",children:e==null?void 0:e.sizes.map(c=>n("button",{onClick:s,children:c},c))})]})]})}function F(r){const[e]=D(_),a={...r==null?void 0:r.productCartData,uniqueID:`${r==null?void 0:r.productCartData.name}-${r==null?void 0:r.productCartData.color}-${r==null?void 0:r.productCartData.size}`};return n("button",{className:"toCartBtn",onClick:d=>{if(r.productCartData.size==="")document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open");else{d.target.childNodes[0].classList.add("cartBtnAnimation");let s;if(localStorage.getItem("cartProducts")===null?s=[]:s=JSON.parse(localStorage.getItem("cartProducts")),s.filter((c,l)=>((c==null?void 0:c.uniqueID)===(a==null?void 0:a.uniqueID)&&(s[l].amount+=1),(c==null?void 0:c.uniqueID)===(a==null?void 0:a.uniqueID))).length>0||s.unshift(a),localStorage.setItem("cartProducts",JSON.stringify(s)),localStorage.setItem("cartNotification",!0),document.querySelector(".navCartNotification").classList.add("active"),e){const c=L(E,`users/${e.uid}`);async function l(){const u={cartItems:s,updatedAt:k()};try{await $(c,u,{merge:!0})}catch(m){console.error("Error adding document: ",m)}}l()}}},children:n("div",{className:""})})}function W(){var l,u,m,S,f,h,C,g;let r=B();const[e,a]=i.useState(Number(r.id)),[t,d]=i.useState({}),[s,c]=i.useState({name:(l=t[0])==null?void 0:l.name,price:(u=t[0])==null?void 0:u.price,discount:(m=t[0])!=null&&m.discount?{percent:(S=t[0])==null?void 0:S.discount.percent,price_after_discount:(f=t[0])==null?void 0:f.discount.price_after_discount}:null,color:"",size:"",image:(h=t[0])==null?void 0:h.image,amount:1});return i.useEffect(()=>{d(I({id:[e]},q))},[]),i.useEffect(()=>{a(Number(r.id))},[r]),i.useEffect(()=>{d(I({id:[e]},q))},[e]),i.useEffect(()=>{var N,p,b,z,v,P,x,y;c({id:(N=t[0])==null?void 0:N.id,name:(p=t[0])==null?void 0:p.name,price:(b=t[0])==null?void 0:b.price,discount:(z=t[0])!=null&&z.discount?{percent:(v=t[0])==null?void 0:v.discount.percentage,price_after_discount:(P=t[0])==null?void 0:P.discount.price_after_discount}:null,color:(x=t[0])==null?void 0:x.colors[0],size:"",image:(y=t[0])==null?void 0:y.image,amount:1})},[t]),n("div",{className:"websiteContent",children:o("div",{className:"productScreen",children:[o("div",{className:"productScreenImgWrapper",children:[n("img",{className:"productImg",src:(C=t[0])==null?void 0:C.image}),n("p",{className:"productName",children:(g=t[0])==null?void 0:g.name})]}),o("div",{className:"productContent",children:[n(J,{productData:t[0]}),n(A,{productData:t[0],productCartData:c}),n(j,{productData:t[0],productCartData:c}),n(F,{productData:t[0],productCartData:s})]})]})})}export{W as default};
