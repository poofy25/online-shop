import{u as d,j as s,a as t,s as N,p as h,b as r,r as p,F as v,Z as u,d as m,c as f,J as b,K as C}from"./index-f77f5197.js";const S="/online-shop/assets/googleIcon-8edb2dab.png";function L(){let o=d();return s("div",{className:"signInContainer",children:[t("p",{children:"SIGN IN WITH..."}),s("button",{onClick:()=>{N(r,h).then(n=>{n.user.email;let a=n.user.displayName;localStorage.setItem("userName",a),o("/account")}).catch(n=>{console.log(n)})},className:"googleBtn",children:[t("img",{src:S}),"GOOGLE"]})]})}function y(){let o=d();return s("div",{className:"signUpContainer",children:[t("p",{children:"SIGN UP WITH..."}),s("button",{onClick:()=>{N(r,h).then(n=>{let a=n.user.email,i=n.user.displayName;const l={userEmail:a,userName:i};return console.log(r.currentUser),localStorage.setItem("userName",i),o("/account"),console.log(l)}).catch(n=>{console.log(n)})},className:"googleBtn",children:[t("img",{src:S}),"GOOGLE"]})]})}const I={SignIn:t(L,{}),SignUp:t(y,{})};function B(){const[o,e]=p.useState(I.SignIn),n=a=>{document.querySelector(".activeBtn").classList.remove("activeBtn"),a.target.classList.add("activeBtn"),e(I[a.target.attributes.container.value])};return s("div",{className:"loginMenu",children:[s("div",{className:"loginBtns",children:[t("button",{className:"activeBtn",onClick:n,container:"SignIn",children:"SIGN IN"}),t("button",{onClick:n,container:"SignUp",children:"SIGN UP"})]}),t("div",{className:"loginMenuContent",children:o})]})}function G(){const o=d();return r.onAuthStateChanged(e=>{if(e&&e.displayName!==localStorage.getItem("userName")){async function n(){const a=u(m,`users/${e.uid}`);async function i(){const g={uid:e.uid,name:e.displayName,email:e.email,updatedAt:f()};try{await b(a,g,{merge:!0}),console.log("Loged in and sent data to db",g)}catch(c){console.error("Error adding document: ",c)}}await i();async function l(){const c=(await C(u(m,`users/${e.uid}`))).data();c.cartItems!==void 0&&localStorage.setItem("cartProducts",JSON.stringify(c.cartItems)),o("/account")}l()}n()}}),t(v,{children:t("div",{className:"websiteContent",children:t(B,{})})})}export{G as default};
