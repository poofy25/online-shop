import{u as g,j as r,a as t,r as u,F as p,e as S,Z as N,d as C,b as f,c as P,J as I}from"./index-10d9cb00.js";const v="/online-shop/assets/emptyCartImage-e50ae3ed.png";function y(){const n=g();return r("div",{className:"emptyCartContainer",children:[t("img",{src:v}),t("p",{className:"emptyCartText",children:"You have no items in cart."}),t("p",{children:"Dilvin has many articles that are waiting for you!"}),t("button",{onClick:()=>{n("/catalog")},className:"goShoppingBtn",children:"Go Shopping"})]})}const D="/online-shop/assets/trashIcon-19b5cd10.png";function J(n){let c=g(),e=n.productData;const[i,l]=u.useState(e.amount),o=s=>{const d=JSON.parse(localStorage.getItem("cartProducts")).filter(h=>h.uniqueID!==s.uniqueID);localStorage.setItem("cartProducts",JSON.stringify(d)),n.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},a=s=>{s.target.textContent==="-"?i-1>0?l(d=>d-1):o(e):s.target.textContent==="+"&&l(d=>d+1)};u.useEffect(()=>{l(e.amount)},[n.LSData]),u.useEffect(()=>{e={...e,amount:i};let s=JSON.parse(localStorage.getItem("cartProducts"));s[n.productIndex]=e,localStorage.setItem("cartProducts",JSON.stringify(s)),n.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},[i]);const m=()=>{c(`/product/${e.id}`)};return r("div",{className:"productCartContainer",children:[t("img",{src:e.image,onClick:m}),r("div",{className:"cartProductDetails",children:[t("p",{className:"cartProductName",onClick:m,children:e.name}),t("button",{className:"cartProductTrashBtn",onClick:()=>{o(e)},children:t("img",{src:D})}),r("span",{className:"sizeAndColorContainer",children:[r("span",{className:"cartProductSize",children:[t("p",{children:"Size: "}),t("p",{children:e.size})]}),r("span",{className:"cartProductColor",children:[t("p",{children:"Color: "}),t("p",{children:e.color})]})]}),r("p",{className:"cartProductPrice",children:["$",(i*(e.discount?e.discount.price_after_discount:e.price)).toFixed(2),i>1?r("span",{children:["   |   $",e.discount?e.discount.price_after_discount:e.price," ea."]}):t(p,{})]}),r("div",{className:"productCountContainer",children:[t("button",{onClick:a,children:"-"}),t("div",{className:"productAmmount",children:i}),t("button",{onClick:a,children:"+"})]})]})]})}function x(){const[n]=S(f),[c,e]=u.useState(JSON.parse(localStorage.getItem("cartProducts"))),i=()=>{let o=0;for(const a in c)o+=c[a].amount*(c[a].discount?c[a].discount.price_after_discount:c[a].price);return o.toFixed(2)},l=()=>{let o=0;for(const a in c)o+=c[a].amount;return o};return u.useEffect(()=>(localStorage.setItem("cartNotification",!1),document.querySelector(".navCartNotification").classList.remove("active"),()=>{if(n&&localStorage.getItem("cartProducts")!==JSON.stringify(c)){const o=N(C,`users/${n.uid}`);async function a(){const m={cartItems:JSON.parse(localStorage.getItem("cartProducts")),updatedAt:P()};try{await I(o,m,{merge:!0})}catch(s){console.error("Error adding document: ",s)}}a()}}),[]),JSON.parse(localStorage.getItem("cartProducts"))===null||JSON.parse(localStorage.getItem("cartProducts")).length===0?t(p,{children:t("div",{className:"websiteContent",children:t(y,{})})}):t(p,{children:t("div",{className:"websiteContent",children:r("div",{className:"cartPage",children:[t("p",{className:"cartPageHeader",children:"Your shopping cart"}),r("div",{className:"checkoutContainer",children:[r("p",{className:"checkoutItemsAmount",children:["Items: ",t("span",{children:l()})]}),r("p",{className:"checkoutAmount",children:["Subtotal: ",r("span",{children:["$",i()]})]}),t("button",{className:"checkoutBtn",children:"CHECKOUT"})]}),c.map((o,a)=>t(J,{productData:o,productIndex:a,updateLS:e,LSData:c},a))]})})})}export{x as default};
