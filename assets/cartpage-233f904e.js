import{u as g,j as c,a as t,r as u,F as p,e as S,Z as N,d as C,b as f,c as P,J as I}from"./index-53161cce.js";const v="/online-shop/assets/emptyCartImage-e50ae3ed.png";function y(){const n=g();return c("div",{className:"emptyCartContainer",children:[t("img",{src:v}),t("p",{className:"emptyCartText",children:"You have no items in cart."}),t("p",{children:"Dilvin has many articles that are waiting for you!"}),t("button",{onClick:()=>{n("/")},className:"goShoppingBtn",children:"Go Shopping"})]})}const D="/online-shop/assets/trashIcon-19b5cd10.png";function J(n){let r=g(),e=n.productData;const[i,d]=u.useState(e.amount),o=s=>{const l=JSON.parse(localStorage.getItem("cartProducts")).filter(h=>h.uniqueID!==s.uniqueID);localStorage.setItem("cartProducts",JSON.stringify(l)),console.log(l),n.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},a=s=>{s.target.textContent==="-"?i-1>0?d(l=>l-1):(console.log("Delete function"),o(e)):s.target.textContent==="+"&&d(l=>l+1)};u.useEffect(()=>{d(e.amount)},[n.LSData]),u.useEffect(()=>{e={...e,amount:i};let s=JSON.parse(localStorage.getItem("cartProducts"));s[n.productIndex]=e,localStorage.setItem("cartProducts",JSON.stringify(s)),n.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},[i]);const m=()=>{r(`/product/${e.id}`)};return c("div",{className:"productCartContainer",children:[t("img",{src:e.image,onClick:m}),c("div",{className:"cartProductDetails",children:[t("p",{className:"cartProductName",onClick:m,children:e.name}),t("button",{className:"cartProductTrashBtn",onClick:()=>{o(e)},children:t("img",{src:D})}),c("span",{className:"sizeAndColorContainer",children:[c("span",{className:"cartProductSize",children:[t("p",{children:"Size: "}),t("p",{children:e.size})]}),c("span",{className:"cartProductColor",children:[t("p",{children:"Color: "}),t("p",{children:e.color})]})]}),c("p",{className:"cartProductPrice",children:["$",(i*(e.discount?e.discount.price_after_discount:e.price)).toFixed(2),i>1?c("span",{children:["   |   $",e.discount?e.discount.price_after_discount:e.price," ea."]}):t(p,{})]}),c("div",{className:"productCountContainer",children:[t("button",{onClick:a,children:"-"}),t("div",{className:"productAmmount",children:i}),t("button",{onClick:a,children:"+"})]})]})]})}function x(){const[n]=S(f),[r,e]=u.useState(JSON.parse(localStorage.getItem("cartProducts"))),i=()=>{let o=0;for(const a in r)o+=r[a].amount*(r[a].discount?r[a].discount.price_after_discount:r[a].price);return o.toFixed(2)},d=()=>{let o=0;for(const a in r)o+=r[a].amount;return o};return u.useEffect(()=>(localStorage.setItem("cartNotification",!1),document.querySelector(".navCartNotification").classList.remove("active"),()=>{if(n&&localStorage.getItem("cartProducts")!==JSON.stringify(r)){const o=N(C,`users/${n.uid}`);async function a(){const m={cartItems:JSON.parse(localStorage.getItem("cartProducts")),updatedAt:P()};try{await I(o,m,{merge:!0})}catch(s){console.error("Error adding document: ",s)}}a()}}),[]),JSON.parse(localStorage.getItem("cartProducts"))===null||JSON.parse(localStorage.getItem("cartProducts")).length===0?t(p,{children:t("div",{className:"websiteContent",children:t(y,{})})}):t(p,{children:t("div",{className:"websiteContent",children:c("div",{className:"cartPage",children:[t("p",{className:"cartPageHeader",children:"Your shopping cart"}),c("div",{className:"checkoutContainer",children:[c("p",{className:"checkoutItemsAmount",children:["Items: ",t("span",{children:d()})]}),c("p",{className:"checkoutAmount",children:["Subtotal: ",c("span",{children:["$",i()]})]}),t("button",{className:"checkoutBtn",children:"CHECKOUT"})]}),r.map((o,a)=>t(J,{productData:o,productIndex:a,updateLS:e,LSData:r},a))]})})})}export{x as default};
