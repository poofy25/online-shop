import{a,F as P,j as i,r as d,g as b,h as p,u as D,f as B}from"./index-22a0dc97.js";import{s as h,J as m}from"./filter-9c4b88d1.js";import{P as S}from"./Product-51eab2e1.js";function F(o){const e=o.catalogData.searchData[o.catalogData.catalogPage-1];return e?a(P,{children:a("div",{className:"catalogProductsContainer",children:o.catalogData.searchData.length>0?e.map((l,t)=>a("div",{className:"catalogProduct",children:a(S,{product_object:l})},t)):a("p",{children:"NO PRODUCTS WERE FOUND"})})}):a("p",{children:"damn"})}function k(o){const e=o.catalogData,l=o.setCatalogData,t=()=>{e.catalogPage>1&&(l({...e,catalogPage:e.catalogPage-1}),document.documentElement.scrollTop=0)},c=()=>{e.catalogPage<e.searchData.length&&(l({...e,catalogPage:e.catalogPage+1}),document.documentElement.scrollTop=0)},s=r=>{r.target.textContent!=e.catalogPage&&(l({...e,catalogPage:Number(r.target.textContent)}),document.documentElement.scrollTop=0)};for(let r=0;r<document.querySelectorAll(".numberedBtns").length;r++)document.querySelectorAll(".numberedBtns")[r].textContent==e.catalogPage?document.querySelectorAll(".numberedBtns")[r].classList.add("deactivateNumberedBtn"):document.querySelectorAll(".numberedBtns")[r].classList.remove("deactivateNumberedBtn");return i("div",{className:"catalogPagesNavigatorContainer",children:[a("button",{onClick:t,className:`movingBtns ${e.catalogPage===1?"deactivateMovingBtn":""}`,children:"<"}),a("button",{onClick:s,className:"numberedBtns",children:1}),e.searchData.length<4?e.searchData.map((r,n)=>{if(!(n===0||e.searchData.length===1))return a("button",{onClick:s,className:"numberedBtns",children:n+1},n)}):e.searchData.map((r,n)=>{if(!(e.searchData.length===1||n===e.searchData.length-1))return a("button",{onClick:s,className:"numberedBtns",children:n+2},n)}),a("button",{onClick:c,className:`movingBtns ${e.catalogPage===e.searchData.length?"deactivateMovingBtn":""}`,children:">"})]})}const A="/online-shop/assets/filterIcon-2a7d15cc.png";function E(o){const e=o.filtersBtn.current,l=d.useRef(null),[t,c]=d.useState(!1);return e&&(e.onclick=()=>{c(!t)}),d.useEffect(()=>{t?(l.current.classList.add("active"),document.body.style.overflow="hidden"):(l.current.classList.remove("active"),document.body.style.overflow="auto")},[t]),i("div",{className:"catalogFilters",ref:l,children:[a("div",{className:"catalogFiltersShadow",onClick:()=>{c(!1)}}),i("div",{className:"catalogFilterHeader",children:[a("p",{children:"Filter"}),i("button",{onClick:()=>{c(!1)},children:[a("div",{}),a("div",{})]})]}),a("div",{className:"catalogFilterOptions",children:a("div",{className:"catalogFilterColor",children:i("div",{className:"catalogFilterColorHeader",children:[a("p",{children:"Color"}),i("button",{children:[a("div",{}),a("div",{})]})]})})})]})}const L=["All Categories","Shirts","Dresses","Jeans","Sportswear","Coats","Tops","Hoodies","Leggings","Trousers"];let u=null;const y=(o,e)=>{for(var l=0;l<e.length;l++)if(e[l].textContent==o)return e[l];return"nothing"};function w(o){const e=o.catalogData,l=b(),t=p(),c=Object.fromEntries(new URLSearchParams(t.search));let s,r;const n=d.useRef(null),f=g=>{u!==g.target&&(r=g.target.textContent==="All Categories"?"*":g.target.textContent,s={category:r},u!==null&&u.classList.remove("selectedCategoryBtn"),g.target.classList.add("selectedCategoryBtn"),u=g.target,l(s,!0))};return d.useEffect(()=>{u=document.querySelector(".selectedCategoryBtn")},[]),d.useEffect(()=>{const g=document.querySelector(".catalogCategories").childNodes;c.category?u=y(c.category!=="*"?c.category:"All Categories",g):u=y("All Categories",g)},[c]),i("div",{className:"catalogHeader",children:[i("div",{className:"catalogCategoryName",children:[i("p",{children:["Women ",e.filters.category==="*"?"Clothing":e.filters.category]}),e.filters.name?i("p",{className:"catalogHeaderSearchValue",children:["Search result for: ",e.filters.name]}):""]}),a("div",{className:"catalogCategories",children:L.map((g,C)=>C===0&&!c.category?a("button",{className:"selectedCategoryBtn",onClick:f,children:g},C):g===c.category?a("button",{className:"selectedCategoryBtn",onClick:f,children:g},C):a("button",{onClick:f,children:g},C))}),i("div",{className:"catalogFilterAndAmountContainer",children:[a("div",{className:"catalogProductAmount",children:i("p",{children:[e.rawSearchData.length," Products"]})}),i("button",{className:"catalogFilter",ref:n,children:[a("img",{src:A}),"Filter"]})]}),a(E,{filtersBtn:n})]})}const N=["name","category","price","color","size"];function v(o){let e;const l=[];if(o.length>10){e=Math.ceil(o.length/10);for(let t=0;t<e;t++){let c=[],s=t===0?1:t+1,r=t*10;for(r;r<=s*10&&!(r>=s*10||r+1>o.length);r++)c.push(o[r]);l.push(c)}}else{let t=[],c=1;for(let s=0;s<=c*10&&!(s>=c*10||s+1>o.length);s++)t.push(o[s]);l.push(t)}return l}function j(){const o=D(),e=B(),l=p(),[t,c]=d.useState({filters:{name:e.searchValue,category:"*"},rawSearchData:h({name:e.searchValue,category:"*"},m),searchData:v(h({name:e.searchValue,category:"*"},m)),catalogPage:1});return d.useEffect(()=>{const s=Object.fromEntries(new URLSearchParams(l.search)),r={};for(const n in s)for(const f in N)if(n===N[f]){r[n]=s[n];break}Object.keys(r).length!==0?c({...t,filters:{...t.filters,...r},rawSearchData:h({...t.filters,...r},m),searchData:v(h({...t.filters,...r},m)),catalogPage:1}):(c({filters:{name:s.searchValue,category:"*"},rawSearchData:h({name:s.searchValue,category:"*"},m),searchData:v(h({name:s.searchValue,category:"*"},m)),catalogPage:1}),o("/catalog"))},[l.search]),a(P,{children:i("div",{className:"websiteContent",children:[a(w,{catalogData:t,setCatalogData:c,searchValue:e.searchValue}),a(F,{catalogData:t,setCatalogData:c,searchValue:e.searchValue}),a(k,{catalogData:t,setCatalogData:c})]})})}export{j as default};
