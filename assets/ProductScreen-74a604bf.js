import{a,F as _,j as o,r as n,C as q,d as k}from"./index-fb413fb8.js";import{s as y,J as w}from"./filter-8d223ecb.js";function E(c){const e=c.productData;return a(_,{children:[o("p",{className:"productPercentOff",children:e!=null&&e.discount?`Save ${e==null?void 0:e.discount.percentage}%`:""}),a("div",{className:"productPriceContainer",children:[o("p",{className:"productPrice",children:e!=null&&e.discount?"":"$"+(e==null?void 0:e.price)}),o("p",{className:"productPriceAfterDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.discount.price_after_discount):""}),o("p",{className:"productPriceBeforeDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.price):""})]})]})}function L(c){const e=c.productData,[i,t]=n.useState(e==null?void 0:e.colors[0]),d=s=>{t(s.target.attributes.btncolor.value),c.productCartData(r=>({...r,color:s.target.attributes.btncolor.value})),s.target.parentNode.childNodes.forEach(r=>{r.style.border="2px solid rgba(0, 0, 0 , 0.5)",r.style.boxShadow="none"}),s.target.style.border="2px solid white",s.target.style.boxShadow="0px 0px 0px 2px rgba(0, 0, 0,.75)"};return n.useEffect(()=>{t(e==null?void 0:e.colors[0])},[c.productData]),a("div",{className:"productColorsContainer",children:[a("p",{className:"productSelectedColor",children:["Color  ",a("span",{children:["- ",i]})]}),o("div",{className:"colorsBtns",children:e==null?void 0:e.colors.map((s,r)=>o("button",{style:{backgroundColor:s,boxShadow:r===0?"0px 0px 0px 2px rgba(0, 0, 0,.75)":"none",border:r===0?"2px solid white":"2px solid rgba(0, 0, 0 , 0.5)"},onClick:d,btncolor:s,children:s},s))})]})}function B(c){const e=c.productData,[i,t]=n.useState("Chose your size "),d=r=>{document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open")},s=r=>{t(r.target.textContent),c.productCartData(l=>({...l,size:r.target.textContent})),document.querySelector(".productSizesContainer").classList.remove("open")};return a("div",{className:"productSizesContainer",children:[o("p",{children:"Size"}),a("button",{className:"sizesBtn",onClick:d,children:[i,a("div",{className:"btnarrow",children:[o("div",{className:"leftarrow"}),o("div",{className:"rightarrow"})]})]}),o("div",{className:"sizesdropdownMenu",children:e==null?void 0:e.sizes.map(r=>o("button",{onClick:s,children:r},r))})]})}function D(c){n.useContext(q);const e=c.productCartData;return o("button",{className:"toCartBtn",onClick:()=>{if(c.productCartData.size==="")document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open");else{let t;localStorage.getItem("cartProducts")===null?t=[]:(console.log(localStorage.cartProducts),t=JSON.parse(localStorage.getItem("cartProducts"))),t.push(e),localStorage.setItem("cartProducts",JSON.stringify(t))}},children:"Add to cart"})}function $(){var l,u,p,m,C,S,h,g;let c=k();const[e,i]=n.useState(Number(c.id)),[t,d]=n.useState({}),[s,r]=n.useState({name:(l=t[0])==null?void 0:l.name,price:(u=t[0])==null?void 0:u.price,discount:(p=t[0])!=null&&p.discount?{percent:(m=t[0])==null?void 0:m.discount.percent,price_after_discount:(C=t[0])==null?void 0:C.discount.price_after_discount}:null,color:"",size:"",image:(S=t[0])==null?void 0:S.image,amount:1});return n.useEffect(()=>{d(y({id:[e]},w))},[]),n.useEffect(()=>{i(Number(c.id))},[c]),n.useEffect(()=>{d(y({id:[e]},w))},[e]),n.useEffect(()=>{var f,N,b,x,P,z,v;r({name:(f=t[0])==null?void 0:f.name,price:(N=t[0])==null?void 0:N.price,discount:(b=t[0])!=null&&b.discount?{percent:(x=t[0])==null?void 0:x.discount.percentage,price_after_discount:(P=t[0])==null?void 0:P.discount.price_after_discount}:null,color:(z=t[0])==null?void 0:z.colors[0],size:"",image:(v=t[0])==null?void 0:v.image,amount:1,uniqueID:Date.now().toString(36)+Math.random().toString(36).substring(2)})},[t]),a("div",{className:"productScreen",children:[o("img",{src:(h=t[0])==null?void 0:h.image}),a("div",{className:"productContent",children:[o("p",{className:"productName",children:(g=t[0])==null?void 0:g.name}),o(E,{productData:t[0]}),o(L,{productData:t[0],productCartData:r}),o(B,{productData:t[0],productCartData:r}),o(D,{productData:t[0],productCartData:s})]})]})}export{$ as default};
