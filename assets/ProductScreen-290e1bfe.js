import{j as a,F as D,a as n,r as l,e as L,b as _,Z as k,d as E,J as $,c as x,f as B}from"./index-e2a835b1.js";import{s as I,J as w}from"./filter-82ad5ad8.js";function J(r){const e=r.productData;return a(D,{children:[n("p",{className:"productPercentOff",children:e!=null&&e.discount?`Save ${e==null?void 0:e.discount.percentage}%`:""}),a("div",{className:"productPriceContainer",children:[n("p",{className:"productPrice",children:e!=null&&e.discount?"":"$"+(e==null?void 0:e.price)}),n("p",{className:"productPriceAfterDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.discount.price_after_discount):""}),n("p",{className:"productPriceBeforeDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.price):""})]})]})}function A(r){const e=r.productData,[s,t]=l.useState(e==null?void 0:e.colors[0]);console.log(e);const d=c=>{const o=document.querySelector(".productColorsContainer");o.classList.contains("open")?o.classList.remove("open"):o.classList.add("open")},i=c=>{const o=c.currentTarget.textContent;t(o),r.productCartData(u=>({...u,color:c.colorChosen})),document.querySelector(".productColorsContainer").classList.remove("open")};return l.useEffect(()=>{t(e==null?void 0:e.colors[0])},[e]),a("div",{className:"productColorsContainer",children:[n("p",{children:"Color"}),a("div",{className:"productColorsWrapper",children:[a("button",{className:"colorsBtn",onClick:d,children:[n("div",{className:"productColorDiv",style:{backgroundColor:s}}),s,a("div",{className:"btnarrow",children:[n("div",{className:"leftarrow"}),n("div",{className:"rightarrow"})]})]}),n("div",{className:"colorsDropdownMenu",children:e==null?void 0:e.colors.map(c=>a("button",{onClick:i,children:[n("div",{className:"productColorDiv",style:{backgroundColor:c}}),c]},c))})]})]})}function j(r){const e=r.productData,[s,t]=l.useState("Chose your size "),d=c=>{document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open")},i=c=>{t(c.target.textContent),r.productCartData(o=>({...o,size:c.target.textContent})),document.querySelector(".productSizesContainer").classList.remove("open")};return a("div",{className:"productSizesContainer",children:[n("p",{children:"Size"}),a("div",{className:"productSizesWrapper",children:[a("button",{className:"sizesBtn",onClick:d,children:[s,a("div",{className:"btnarrow",children:[n("div",{className:"leftarrow"}),n("div",{className:"rightarrow"})]})]}),n("div",{className:"sizesdropdownMenu",children:e==null?void 0:e.sizes.map(c=>n("button",{onClick:i,children:c},c))})]})]})}function F(r){const[e]=L(_),s={...r==null?void 0:r.productCartData,uniqueID:`${r==null?void 0:r.productCartData.name}-${r==null?void 0:r.productCartData.color}-${r==null?void 0:r.productCartData.size}`};return n("button",{className:"toCartBtn",onClick:d=>{if(r.productCartData.size==="")document.querySelector(".productSizesContainer").classList.contains("open")||document.querySelector(".productSizesContainer").classList.add("open");else{d.target.childNodes[0].classList.add("cartBtnAnimation");let i;if(localStorage.getItem("cartProducts")===null?i=[]:i=JSON.parse(localStorage.getItem("cartProducts")),i.filter((c,o)=>((c==null?void 0:c.uniqueID)===(s==null?void 0:s.uniqueID)&&(i[o].amount+=1),(c==null?void 0:c.uniqueID)===(s==null?void 0:s.uniqueID))).length>0||i.unshift(s),localStorage.setItem("cartProducts",JSON.stringify(i)),localStorage.setItem("cartNotification",!0),document.querySelector(".navCartNotification").classList.add("active"),e){const c=k(E,`users/${e.uid}`);async function o(){const u={cartItems:i,updatedAt:x()};try{await $(c,u,{merge:!0})}catch(m){console.error("Error adding document: ",m)}}o()}}},children:n("div",{className:""})})}function H(){var o,u,m,C,f,S,h,N;let r=B();const[e,s]=l.useState(Number(r.id)),[t,d]=l.useState({}),[i,c]=l.useState({name:(o=t[0])==null?void 0:o.name,price:(u=t[0])==null?void 0:u.price,discount:(m=t[0])!=null&&m.discount?{percent:(C=t[0])==null?void 0:C.discount.percent,price_after_discount:(f=t[0])==null?void 0:f.discount.price_after_discount}:null,color:"",size:"",image:(S=t[0])==null?void 0:S.image,amount:1});return l.useEffect(()=>{d(I({id:[e]},w))},[]),l.useEffect(()=>{s(Number(r.id))},[r]),l.useEffect(()=>{d(I({id:[e]},w))},[e]),l.useEffect(()=>{var g,v,p,z,P,b,y,q;c({id:(g=t[0])==null?void 0:g.id,name:(v=t[0])==null?void 0:v.name,price:(p=t[0])==null?void 0:p.price,discount:(z=t[0])!=null&&z.discount?{percent:(P=t[0])==null?void 0:P.discount.percentage,price_after_discount:(b=t[0])==null?void 0:b.discount.price_after_discount}:null,color:(y=t[0])==null?void 0:y.colors[0],size:"",image:(q=t[0])==null?void 0:q.image,amount:1})},[t]),n("div",{className:"websiteContent",children:a("div",{className:"productScreen",children:[a("div",{className:"productScreenImgWrapper",children:[n("img",{className:"productImg",src:(h=t[0])==null?void 0:h.image}),n("p",{className:"productName",children:(N=t[0])==null?void 0:N.name})]}),a("div",{className:"productContent",children:[n(J,{productData:t[0]}),n(A,{productData:t[0],productCartData:c}),n(j,{productData:t[0],productCartData:c}),n(F,{productData:t[0],productCartData:i})]})]})})}export{H as default};
