import{j as i,F as _,a as c,r as l,b as k,c as E,Z as $,d as x,J as B,e as J,f as A}from"./index-48951c41.js";import{s as D,J as L}from"./filter-82ad5ad8.js";function W(n){const e=n.productData;return i(_,{children:[c("p",{className:"productPercentOff",children:e!=null&&e.discount?`Save ${e==null?void 0:e.discount.percentage}%`:""}),i("div",{className:"productPriceContainer",children:[c("p",{className:"productPrice",children:e!=null&&e.discount?"":"$"+(e==null?void 0:e.price)}),c("p",{className:"productPriceAfterDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.discount.price_after_discount):""}),c("p",{className:"productPriceBeforeDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.price):""})]})]})}function j(n){const e=n.productData,[s,d]=l.useState(e==null?void 0:e.colors[0]);console.log(e);const t=r=>{const o=document.querySelector(".productColorsContainer");o.classList.contains("open")?o.classList.remove("open"):o.classList.add("open")},a=r=>{const o=r.currentTarget.textContent;document.querySelector(".productColorsContainer").classList.remove("open"),d(o),n.productCartData(u=>({...u,color:o}))};return l.useEffect(()=>{d(e==null?void 0:e.colors[0])},[e]),i("div",{className:"productColorsContainer",children:[c("p",{children:"Color"}),i("div",{className:"productColorsWrapper",children:[i("button",{className:"colorsBtn",onClick:t,children:[c("div",{className:"productColorDiv",style:{backgroundColor:s}}),s,i("div",{className:"btnarrow",children:[c("div",{className:"leftarrow"}),c("div",{className:"rightarrow"})]})]}),c("div",{className:"colorsDropdownMenu",children:e==null?void 0:e.colors.map(r=>i("button",{onClick:a,children:[c("div",{className:"productColorDiv",style:{backgroundColor:r}}),r]},r))})]})]})}function F(n){const e=n.productData,[s,d]=l.useState("Chose your size "),t=r=>{document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open")},a=r=>{d(r.target.textContent),n.productCartData(o=>({...o,size:r.target.textContent})),document.querySelector(".productSizesContainer").classList.remove("open")};return i("div",{className:"productSizesContainer",children:[c("p",{children:"Size"}),i("div",{className:"productSizesWrapper",children:[i("button",{className:"sizesBtn",onClick:t,children:[s,i("div",{className:"btnarrow",children:[c("div",{className:"leftarrow"}),c("div",{className:"rightarrow"})]})]}),c("div",{className:"sizesdropdownMenu",children:e==null?void 0:e.sizes.map(r=>c("button",{onClick:a,children:r},r))})]})]})}function M(n){const[e]=k(E),s={...n==null?void 0:n.productCartData,uniqueID:`${n==null?void 0:n.productCartData.name}-${n==null?void 0:n.productCartData.color}-${n==null?void 0:n.productCartData.size}`};return c("button",{className:"toCartBtn",onClick:t=>{if(n.productCartData.size==="")document.querySelector(".productSizesContainer").classList.contains("open")||document.querySelector(".productSizesContainer").classList.add("open");else{t.target.childNodes[0].classList.add("cartBtnAnimation");let a;if(localStorage.getItem("cartProducts")===null?a=[]:a=JSON.parse(localStorage.getItem("cartProducts")),a.filter((r,o)=>((r==null?void 0:r.uniqueID)===(s==null?void 0:s.uniqueID)&&(a[o].amount+=1),(r==null?void 0:r.uniqueID)===(s==null?void 0:s.uniqueID))).length>0||a.unshift(s),localStorage.setItem("cartProducts",JSON.stringify(a)),localStorage.setItem("cartNotification",!0),document.querySelector(".navCartNotification").classList.add("active"),e){const r=$(x,`users/${e.uid}`);async function o(){const u={cartItems:a,updatedAt:J()};try{await B(r,u,{merge:!0})}catch(m){console.error("Error adding document: ",m,u)}}o()}}},children:c("div",{className:""})})}function T(){var u,m,C,f,S,h,N,g,v;const n=window.innerWidth<=767;let e=A();const[s,d]=l.useState(Number(e.id)),[t,a]=l.useState({}),[r,o]=l.useState({name:(u=t[0])==null?void 0:u.name,price:(m=t[0])==null?void 0:m.price,discount:(C=t[0])!=null&&C.discount?{percent:(f=t[0])==null?void 0:f.discount.percent,price_after_discount:(S=t[0])==null?void 0:S.discount.price_after_discount}:null,color:"",size:"",image:(h=t[0])==null?void 0:h.image,amount:1});return l.useEffect(()=>{a(D({id:[s]},L))},[]),l.useEffect(()=>{d(Number(e.id))},[e]),l.useEffect(()=>{a(D({id:[s]},L))},[s]),l.useEffect(()=>{var p,z,P,b,w,y,q,I;o({id:(p=t[0])==null?void 0:p.id,name:(z=t[0])==null?void 0:z.name,price:(P=t[0])==null?void 0:P.price,discount:(b=t[0])!=null&&b.discount?{percent:(w=t[0])==null?void 0:w.discount.percentage,price_after_discount:(y=t[0])==null?void 0:y.discount.price_after_discount}:null,color:(q=t[0])==null?void 0:q.colors[0],size:"",image:(I=t[0])==null?void 0:I.image,amount:1})},[t]),c("div",{className:"websiteContent",children:i("div",{className:"productScreen",children:[i("div",{className:"productScreenImgWrapper",children:[c("img",{className:"productImg",src:(N=t[0])==null?void 0:N.image}),n&&c("p",{className:"productName",children:(g=t[0])==null?void 0:g.name})]}),i("div",{className:"productContent",children:[!n&&c("p",{className:"productName",children:(v=t[0])==null?void 0:v.name}),c(W,{productData:t[0]}),c(j,{productData:t[0],productCartData:o}),c(F,{productData:t[0],productCartData:o}),c(M,{productData:t[0],productCartData:r})]})]})})}export{T as default};
