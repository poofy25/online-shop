import{u as p,a as c,j as t,r as d,F as u}from"./index-a735902b.js";const h="/online-shop/assets/emptyCartImage-e50ae3ed.png";function g(){const a=p();return c("div",{className:"emptyCartContainer",children:[t("img",{src:h}),t("p",{className:"emptyCartText",children:"You have no items in cart."}),t("p",{children:"Dilvin has many articles that are waiting for you!"}),t("button",{onClick:()=>{a("/")},className:"goShoppingBtn",children:"Go Shopping"})]})}const C="/online-shop/assets/trashIcon-19b5cd10.png";function S(a){let e=a.productData;const[o,l]=d.useState(e.amount),n=s=>{const i=JSON.parse(localStorage.getItem("cartProducts")).filter(m=>m.uniqueID!==s.uniqueID);localStorage.setItem("cartProducts",JSON.stringify(i)),console.log(i),document.querySelector(".navCartNotification").textContent=i.length,a.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},r=s=>{s.target.textContent==="-"?o-1>0?l(i=>i-1):(console.log("Delete function"),n(e)):s.target.textContent==="+"&&l(i=>i+1)};return d.useEffect(()=>{l(e.amount)},[a.LSData]),d.useEffect(()=>{e={...e,amount:o};let s=JSON.parse(localStorage.getItem("cartProducts"));s[a.productIndex]=e,localStorage.setItem("cartProducts",JSON.stringify(s)),a.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},[o]),c("div",{className:"productCartContainer",children:[t("img",{src:e.image}),c("div",{className:"cartProductDetails",children:[t("p",{className:"cartProductName",children:e.name}),t("button",{className:"cartProductTrashBtn",onClick:()=>{n(e)},children:t("img",{src:C})}),c("span",{className:"sizeAndColorContainer",children:[c("span",{className:"cartProductSize",children:[t("p",{children:"Size: "}),t("p",{children:e.size})]}),c("span",{className:"cartProductColor",children:[t("p",{children:"Color: "}),t("p",{children:e.color})]})]}),c("p",{className:"cartProductPrice",children:["$",(o*(e.discount?e.discount.price_after_discount:e.price)).toFixed(2),o>1?c("span",{children:["   |   $",e.discount?e.discount.price_after_discount:e.price," ea."]}):t(u,{})]}),c("div",{className:"productCountContainer",children:[t("button",{onClick:r,children:"-"}),t("div",{className:"productAmmount",children:o}),t("button",{onClick:r,children:"+"})]})]})]})}d.createContext(null);function f(){const[a,e]=d.useState(JSON.parse(localStorage.getItem("cartProducts")));console.log("Rerendered Page");const o=()=>{let n=0;for(const r in a)n+=a[r].amount*(a[r].discount?a[r].discount.price_after_discount:a[r].price);return n.toFixed(2)},l=()=>{let n=0;for(const r in a)n+=a[r].amount;return n};return JSON.parse(localStorage.getItem("cartProducts"))===null||JSON.parse(localStorage.getItem("cartProducts")).length===0?t(u,{children:t("div",{className:"websiteContent",children:t(g,{})})}):t(u,{children:t("div",{className:"websiteContent",children:c("div",{className:"cartPage",children:[t("p",{className:"cartPageHeader",children:"Your shopping cart"}),c("div",{className:"checkoutContainer",children:[c("p",{className:"checkoutItemsAmount",children:["Items: ",t("span",{children:l()})]}),c("p",{className:"checkoutAmount",children:["Subtotal: ",c("span",{children:["$",o()]})]}),t("button",{className:"checkoutBtn",children:"CHECKOUT"})]}),a.map((n,r)=>t(S,{productData:n,productIndex:r,updateLS:e,LSData:a},r))]})})})}export{f as default};
