import{u as p,j as a,a as e,r as u,F as g,b as S,Z as N,d as C,c as f,e as P,J as I}from"./index-07659d2a.js";const v="/online-shop/assets/emptyCartImage-e50ae3ed.png";function O(){const n=p();return a("div",{className:"emptyCartContainer",children:[e("img",{src:v}),e("p",{className:"emptyCartText",children:"You have no items in cart."}),e("p",{children:"Dilvin has many articles that are waiting for you!"}),e("button",{onClick:()=>{n("/catalog")},className:"goShoppingBtn",children:"SHOP NOW"})]})}const y="/online-shop/assets/trashIcon-19b5cd10.png";function A(n){let l=p(),t=n.productData;const[s,d]=u.useState(t.amount),m=o=>{const i=JSON.parse(localStorage.getItem("cartProducts")).filter(h=>h.uniqueID!==o.uniqueID);localStorage.setItem("cartProducts",JSON.stringify(i)),n.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},r=o=>{o.target.textContent==="-"?s-1>0?d(i=>i-1):m(t):o.target.textContent==="+"&&d(i=>i+1)};u.useEffect(()=>{d(t.amount)},[n.LSData]),u.useEffect(()=>{t={...t,amount:s};let o=JSON.parse(localStorage.getItem("cartProducts"));o[n.productIndex]=t,localStorage.setItem("cartProducts",JSON.stringify(o)),n.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},[s]);const c=()=>{l(`/product/${t.id}`)};return a("div",{className:"productCartContainer",children:[e("img",{src:t.image,onClick:c}),a("div",{className:"cartProductDetails",children:[e("p",{className:"cartProductName",onClick:c,children:t.name}),e("button",{className:"cartProductTrashBtn",onClick:()=>{m(t)},children:e("img",{src:y})}),a("span",{className:"sizeAndColorContainer",children:[a("span",{className:"cartProductSize",children:[e("p",{children:"Size: "}),e("p",{children:t.size})]}),a("span",{className:"cartProductColor",children:[e("p",{children:"Color: "}),e("p",{children:t.color})]})]}),a("p",{className:"cartProductPrice",children:["$",(s*(t.discount?t.discount.price_after_discount:t.price)).toFixed(2),s>1?a("span",{children:["   |   $",t.discount?t.discount.price_after_discount:t.price," ea."]}):e(g,{})]}),a("div",{className:"productCountContainer",children:[e("button",{onClick:r,children:"-"}),e("div",{className:"productAmmount",children:s}),e("button",{onClick:r,children:"+"})]})]})]})}function D(){const[n]=S(f),l=p(),[t,s]=u.useState(JSON.parse(localStorage.getItem("cartProducts"))),d=()=>{let r=0;for(const c in t)r+=t[c].amount*(t[c].discount?t[c].discount.price_after_discount:t[c].price);return r.toFixed(2)},m=()=>{let r=0;for(const c in t)r+=t[c].amount;return r};return u.useEffect(()=>(localStorage.setItem("cartNotification",!1),document.querySelector(".navCartNotification").classList.remove("active"),()=>{if(n&&localStorage.getItem("cartProducts")!==JSON.stringify(t)){const r=N(C,`users/${n.uid}`);async function c(){const o={cartItems:JSON.parse(localStorage.getItem("cartProducts")),updatedAt:P()};try{await I(r,o,{merge:!0})}catch(i){console.error("Error adding document: ",i)}}c()}}),[]),JSON.parse(localStorage.getItem("cartProducts"))===null||JSON.parse(localStorage.getItem("cartProducts")).length===0?e(g,{children:e("div",{className:"websiteContent",children:e(O,{})})}):e(g,{children:e("div",{className:"websiteContent",children:a("div",{className:"cartPage",children:[a("div",{className:"cartPageItemsContainer",children:[e("p",{className:"cartPageHeader",children:"YOUR CART"}),t.map((r,c)=>e(A,{productData:r,productIndex:c,updateLS:s,LSData:t},c))]}),a("div",{className:"checkoutContainer",children:[e("p",{className:"checkoutHeader",children:"TOTAL"}),a("p",{className:"checkoutItemsAmount",children:["Items: ",e("span",{children:m()})]}),a("p",{className:"checkoutAmount",children:["Subtotal: ",a("span",{children:["$",d()]})]}),e("button",{className:"checkoutBtn",onClick:()=>{l(n?"/checkout":"/signin")},children:"CHECKOUT"})]})]})})})}export{D as default};
