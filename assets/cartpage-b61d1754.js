import{r as d,C as p,u as g,a as r,j as t,F as u}from"./index-e79edb9e.js";const h="/online-shop/assets/emptyCartImage-e50ae3ed.png";function C(){d.useContext(p);const e=g();return r("div",{className:"emptyCartContainer",children:[t("img",{src:h}),t("p",{className:"emptyCartText",children:"You have no items in cart."}),t("p",{children:"Dilvin has many articles that are waiting for you!"}),t("button",{onClick:()=>{e("/")},className:"goShoppingBtn",children:"Go Shopping"})]})}function S(e){let a=e.productData;const[s,i]=d.useState(a.amount),n=o=>{const l=JSON.parse(localStorage.getItem("cartProducts")).filter(m=>m.uniqueID!==o.uniqueID);localStorage.setItem("cartProducts",JSON.stringify(l)),console.log(l),e.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},c=o=>{o.target.textContent==="-"?s-1>0?i(l=>l-1):(console.log("Delete function"),n(a)):o.target.textContent==="+"&&i(l=>l+1)};return d.useEffect(()=>{i(a.amount)},[e.LSData]),d.useEffect(()=>{a={...a,amount:s};let o=JSON.parse(localStorage.getItem("cartProducts"));o[e.productIndex]=a,localStorage.setItem("cartProducts",JSON.stringify(o)),e.updateLS(JSON.parse(localStorage.getItem("cartProducts")))},[s]),r("div",{className:"productCartContainer",children:[t("img",{src:a.image}),r("div",{className:"cartProductDetails",children:[t("p",{className:"cartProductName",children:a.name}),r("span",{className:"sizeAndColorContainer",children:[r("span",{className:"cartProductSize",children:[t("p",{children:"Size: "}),t("p",{children:a.size})]}),r("span",{className:"cartProductColor",children:[t("p",{children:"Color: "}),t("p",{children:a.color})]})]}),r("p",{className:"cartProductPrice",children:["$",a.discount?a.discount.price_after_discount:a.price]}),r("div",{className:"productCountContainer",children:[t("button",{onClick:c,children:"-"}),t("div",{className:"productAmmount",children:s}),t("button",{onClick:c,children:"+"})]})]})]})}function P(){const[e,a]=d.useState(JSON.parse(localStorage.getItem("cartProducts")));console.log("Rerendered Page");const s=()=>{let n=0;for(const c in e)n+=e[c].amount*(e[c].discount?e[c].discount.price_after_discount:e[c].price);return n.toFixed(2)},i=()=>{let n=0;for(const c in e)n+=e[c].amount;return n};return JSON.parse(localStorage.getItem("cartProducts"))===null||JSON.parse(localStorage.getItem("cartProducts")).length===0?t(u,{children:t("div",{className:"websiteContent",children:t(C,{})})}):t(u,{children:t("div",{className:"websiteContent",children:r("div",{className:"cartPage",children:[t("p",{className:"cartPageHeader",children:"Your shopping cart"}),r("div",{className:"checkoutContainer",children:[r("p",{className:"checkoutItemsAmount",children:["Items: ",t("span",{children:i()})]}),r("p",{className:"checkoutAmount",children:["Subtotal: ",r("span",{children:["$",s()]})]}),t("button",{className:"checkoutBtn",children:"Checkout"})]}),e.map((n,c)=>t(S,{productData:n,productIndex:c,updateLS:a,LSData:e},c))]})})})}export{P as default};
