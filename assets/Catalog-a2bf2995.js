import{a,F as E,j as u,r as g,g as A,h as L,u as T}from"./index-10d9cb00.js";import{s as F,J as N}from"./filter-7252babd.js";import{P as w}from"./Product-5e7b65f4.js";const b=function(o){if(o.search){const r=decodeURI(o.search).split("&"),i=Object();for(let s=0;s<r.length;s++){const t=r[s].split("=");t[1]=t[1].replace("%3D","="),t[0]=t[0].replace("?",""),typeof i[t[0]]>"u"?i[t[0]]=[t[1]]:i[t[0]].push(t[1])}return i}else return null};function x(o){const e=o.catalogData.searchData[o.catalogData.catalogPage-1];return e?a(E,{children:a("div",{className:"catalogProductsContainer",children:o.catalogData.searchData.length>0?e.map((r,i)=>a("div",{className:"catalogProduct",children:a(w,{product_object:r})},i)):a("p",{children:"NO PRODUCTS WERE FOUND"})})}):a("p",{children:"damn"})}function $(o){const e=o.catalogData,r=o.setCatalogData,i=()=>{e.catalogPage>1&&(r({...e,catalogPage:e.catalogPage-1}),document.documentElement.scrollTop=0)},s=()=>{e.catalogPage<e.searchData.length&&(r({...e,catalogPage:e.catalogPage+1}),document.documentElement.scrollTop=0)},t=n=>{n.target.textContent!=e.catalogPage&&(r({...e,catalogPage:Number(n.target.textContent)}),document.documentElement.scrollTop=0)};for(let n=0;n<document.querySelectorAll(".numberedBtns").length;n++)document.querySelectorAll(".numberedBtns")[n].textContent==e.catalogPage?document.querySelectorAll(".numberedBtns")[n].classList.add("deactivateNumberedBtn"):document.querySelectorAll(".numberedBtns")[n].classList.remove("deactivateNumberedBtn");return u("div",{className:"catalogPagesNavigatorContainer",children:[a("button",{onClick:i,className:`movingBtns ${e.catalogPage===1?"deactivateMovingBtn":""}`,children:"<"}),a("button",{onClick:t,className:"numberedBtns",children:1}),e.searchData.length<4?e.searchData.map((n,c)=>{if(!(c===0||e.searchData.length===1))return a("button",{onClick:t,className:"numberedBtns",children:c+1},c)}):e.searchData.map((n,c)=>{if(!(e.searchData.length===1||c===e.searchData.length-1))return a("button",{onClick:t,className:"numberedBtns",children:c+2},c)}),a("button",{onClick:s,className:`movingBtns ${e.catalogPage===e.searchData.length?"deactivateMovingBtn":""}`,children:">"})]})}const q="/online-shop/assets/filterIcon-2a7d15cc.png";function H(o){const e=o.option,r=o.filters,[i,s]=g.useState(),t=()=>{o.setOptionSelected({name:e.name,element:e.element,data:e==null?void 0:e.data})};return g.useEffect(()=>{var n,c;r[e.name.toLowerCase()]?e.name==="Price"?(r.price.range&&(r.price.range.dir===">="?s(`Over ${(n=r.price)==null?void 0:n.range.amount}$`):s(`Under ${(c=r.price)==null?void 0:c.range.amount}$`)),r.price.sale&&s(i?d=>`${d} , On sale`:"On sale")):s(r[e.name.toLowerCase()].toString().replaceAll(","," , ")):s(null)},[r]),a("div",{className:"catalogFilterBtn",onClick:t,children:u("div",{className:"catalogFilterBtnContainer",children:[u("div",{className:"catalogFilterBtnContainerWrapper",children:[a("p",{children:e==null?void 0:e.name}),u("button",{className:"filterArrowBtn",children:[a("div",{}),a("div",{})]})]}),i&&a("div",{className:"selectedDataContainer",children:i})]})})}function O(o){return a("div",{className:"viewItemsContainer",children:a("button",{onClick:()=>{o.closeFilterMenu(!1)},children:"VIEW ITEMS"})})}function R(o){const e=o.filters,r=o.setFilters,i=o.data,s=(t,n)=>{e.color?e.color.indexOf(n)===-1?(t.currentTarget.classList.add("selected"),r(c=>({...c,color:[n,...c.color]}))):(t.currentTarget.classList.remove("selected"),r(c=>{if(c.color.filter(d=>d!==n).length===0){const{color:d,...l}=c;return l}return{...c,color:c.color.filter(d=>d!==n)}})):(t.currentTarget.classList.add("selected"),r(c=>({...c,color:[n]})))};return a("div",{className:"filterOptionContaianer",children:i.map((t,n)=>{var d;let c=!1;return((d=e==null?void 0:e.color)==null?void 0:d.indexOf(t.name))!==-1&&e.color&&(c=!0),a("div",{className:`filterOptionBtn ${c&&"selected"} `,onClick:l=>{s(l,t.name)},children:u("div",{className:"filterOptionBtnContainer",children:[a("div",{style:{backgroundColor:t.value},className:"colorDiv"}),a("p",{children:t.name}),a("div",{className:"check"})]})},n)})})}function I(o){const e=o.filters,r=o.setFilters,i=o.data,s=(t,n)=>{e.category?e.category.indexOf(n)===-1?(t.currentTarget.classList.add("selected"),r(c=>({...c,category:[n]}))):(t.currentTarget.classList.remove("selected"),r(c=>{if(c.category.filter(d=>d!==n).length===0){const{category:d,...l}=c;return l}return{...c,category:c.category.filter(d=>d!==n)}})):(t.currentTarget.classList.add("selected"),r(c=>({...c,category:[n]})))};return a("div",{className:"filterOptionContaianer",children:i.map((t,n)=>{var d;let c=!1;return((d=e==null?void 0:e.category)==null?void 0:d.indexOf(t.name))!==-1&&e.category&&(c=!0),a("div",{className:`filterOptionBtn ${c&&"selected"} `,onClick:l=>{s(l,t.name)},children:u("div",{className:"filterOptionBtnContainer",children:[a("p",{children:t.name}),a("div",{className:"check"})]})},n)})})}function V(o){const e=o.filters,r=o.setFilters,i=g.useRef(null),s=g.useRef(!1),[t,n]=g.useState(e!=null&&e.range?[e.range[0],e.range[1]]:[">=","5"]),c=l=>{e!=null&&e.sale?(l.currentTarget.classList.remove("selected"),r(h=>{const{sale:m,...v}=h;return{...v}})):(l.currentTarget.classList.add("selected"),r(h=>({...h,sale:!0})))},d=(l,h)=>{document.querySelector(".priceBtn.active").classList.remove("active"),l.currentTarget.classList.add("active"),n(m=>{const v=[...m];return v[0]=h,v})};return g.useEffect(()=>{s.current===!0?(i.current.textContent=`${t[1]}$`,r(l=>({...l,range:t}))):s.current=!0},[t]),g.useEffect(()=>{document.getElementById("priceInput").value=e!=null&&e.range?e==null?void 0:e.range[1]:"5"},[]),u("div",{className:"filterOptionContaianer",children:[a("div",{className:`filterOptionBtn ${(e==null?void 0:e.sale)!==!1&&(e==null?void 0:e.sale)&&"selected"} `,onClick:l=>{c(l,e.sale)},children:u("div",{className:"filterOptionBtnContainer",children:[a("p",{children:"Sale"}),a("div",{className:"check"})]})}),a("div",{className:"filterOptionBtn",children:u("div",{className:"filterOptionBtnContainer price",children:[u("div",{className:"priceWrapper",children:[a("button",{className:`priceBtn ${e!=null&&e.range?(e==null?void 0:e.range[0])===">="&&"active":"active"}`,onClick:l=>{d(l,">=")},children:"Over"}),u("p",{ref:i,children:[e!=null&&e.range?e.range[1]:t[1],"$"]}),a("button",{className:`priceBtn ${(e==null?void 0:e.range)&&(e==null?void 0:e.range[0])==="<="&&"active"}`,onClick:l=>{d(l,"<=")},children:"Under"})]}),u("div",{className:"inputWrapper",children:[a("input",{type:"range",id:"priceInput",min:"5",max:"250",step:"5",list:"tickmarks",onChange:()=>{n(l=>{const h=[...l];return h[1]=document.getElementById("priceInput").value,h})}}),u("datalist",{id:"tickmarks",children:[a("option",{value:"5",label:"5$"}),a("option",{value:"250",label:"250$"})]})]})]})})]})}function z(o){const e=o.filters,r=o.setFilters,i=o.data,s=(t,n)=>{e.size?e.size.indexOf(n)===-1?(t.currentTarget.classList.add("selected"),r(c=>({...c,size:[n,...c.size]}))):(t.currentTarget.classList.remove("selected"),r(c=>{if(c.size.filter(d=>d!==n).length===0){const{size:d,...l}=c;return l}return{...c,size:c.size.filter(d=>d!==n)}})):(t.currentTarget.classList.add("selected"),r(c=>({...c,size:[n]})))};return a("div",{className:"filterOptionContaianer",children:i.map((t,n)=>{var d;let c=!1;return((d=e==null?void 0:e.size)==null?void 0:d.indexOf(t.name))!==-1&&e.size&&(c=!0),a("div",{className:`filterOptionBtn ${c&&"selected"} `,onClick:l=>{s(l,t.name)},children:u("div",{className:"filterOptionBtnContainer",children:[a("p",{children:t.name}),a("div",{className:"check"})]})},n)})})}const j=[{name:"Red",value:"rgb(255,0,0)"},{name:"Brown",value:"rgb(165, 42, 42)"},{name:"Khaki",value:"rgb(240, 230, 140)"},{name:"Yellow",value:"rgb(255,255,0)"},{name:"Olive",value:"rgb(128,128,0)"},{name:"Green",value:"rgb(0,255,0)"},{name:"Light blue",value:"rgb(173, 216, 230)"},{name:"Blue",value:"rgb(0, 0, 255)"},{name:"Navy",value:"rgb(0, 0, 128)"},{name:"Purple",value:"rgb(128, 0, 128)"},{name:"Pink",value:"rgb(255, 192, 203)"},{name:"Black",value:"rgb(0,0,0)"},{name:"Gray",value:"rgb(128, 128, 128)"},{name:"Beige",value:"rgb(245, 245, 220)"},{name:"White",value:"rgb(255,255,255)"}],M=[{name:"Shirts"},{name:"Dresses"},{name:"Jeans"},{name:"Sportswear"},{name:"Coats"},{name:"Tops"},{name:"Hoodies"},{name:"Leggings"},{name:"Trousers"}],U=[{name:"XXS"},{name:"XS"},{name:"S"},{name:"M"},{name:"L"},{name:"XL"},{name:"XXL"}];let W=[{name:"Category",element:a(I,{}),data:M},{name:"Color",element:a(R,{}),data:j},{name:"Size",element:a(z,{}),data:U},{name:"Price",element:a(V,{})}];function X(o){var k,S;const e=o.filtersBtn.current,r=A(),i=g.useRef(null),s=L(),t=g.useRef(!1),n=b(s),[c,d]=g.useState(!1),[l,h]=g.useState(null),[m,v]=g.useState({...n});return console.log("rerender"),e&&(e.onclick=()=>{d(!c)}),g.useEffect(()=>{console.log(m)},[m]),g.useEffect(()=>{o.urlParams&&m!==o.urlParams&&(console.log(m,{...n},o.urlParams),v(o.urlParams))},[o.urlParams]),g.useEffect(()=>{t.current?c?(i.current.classList.add("on"),document.body.style.overflow="hidden",h(null)):(i.current.classList.remove("on"),document.body.style.overflow="auto",m&&r(m)):t.current=!0},[c]),g.useEffect(()=>{l!==null&&(document.querySelector(".catalogFiltersSecond").classList.add("Active"),document.querySelector(".catalogFiltersFirst").classList.remove("Active")),l===null&&(document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"))},[l]),u("div",{className:"catalogFilterMenu",ref:i,children:[u("div",{className:"catalogFiltersContainer",children:[u("div",{className:"catalogFiltersFirst",children:[a("div",{className:"catalogFilterHeader",children:a("p",{children:"FILTER"})}),a("div",{className:"catalogFilterOptions",children:W.map((C,y)=>a(H,{option:{...C},setOptionSelected:h,filters:m},y))}),a(O,{closeFilterMenu:d})]}),u("div",{className:"catalogFiltersSecond",children:[u("div",{className:"catalogFilterHeader",children:[u("button",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{h(null)},500)},children:[a("div",{}),a("div",{})]}),a("p",{onClick:()=>{document.querySelector(".catalogFiltersSecond").classList.remove("Active"),document.querySelector(".catalogFiltersFirst").classList.add("Active"),setTimeout(()=>{h(null)},500)},children:(k=l==null?void 0:l.name)==null?void 0:k.toUpperCase()}),(l==null?void 0:l.name)!=="Price"?a("button",{className:"selectionBtn",onClick:()=>{var C,y;if(m[(C=l==null?void 0:l.name)==null?void 0:C.toLowerCase()]){const p={...m};delete p[(y=l==null?void 0:l.name)==null?void 0:y.toLowerCase()],v(p)}},children:m[(S=l==null?void 0:l.name)==null?void 0:S.toLowerCase()]?a("p",{children:"CLEAR"}):""}):a("button",{className:"selectionBtn",onClick:()=>{if(m.sale||m.range){const C={...m};delete C.range,delete C.sale,v(C)}},children:m.sale&&a("p",{children:"CLEAR"})||m.range&&a("p",{children:"CLEAR"})})]}),a("div",{className:"catalogFilterOptions",children:(l==null?void 0:l.element)&&g.cloneElement(l==null?void 0:l.element,{setFilters:v,filters:m,data:l==null?void 0:l.data})}),a(O,{closeFilterMenu:d})]})]}),a("div",{className:"catalogFiltersShadow",onClick:()=>{d(!1)}})]})}const J=["All Categories","Shirts","Dresses","Jeans","Sportswear","Coats","Tops","Hoodies","Leggings","Trousers"];let f=null;const B=(o,e)=>{for(var r=0;r<e.length;r++)if(e[r].textContent==o)return e[r];return"nothing"};function G(o){const e=o.catalogData,r=A(),i=L(),s=b(i);let t,n;const c=g.useRef(null);console.log("OFFFFFFFFFFf",e,s==null?void 0:s.category);const d=l=>{if(f!==l.target){if(n=l.target.textContent==="All Categories"?"*":l.target.textContent,n!=="*")t={...s,category:[n]};else{const{category:h,...m}=s;t={...m}}f!==null&&f.classList.remove("selectedCategoryBtn"),l.target.classList.add("selectedCategoryBtn"),f=l.target,r(t,!0)}};return g.useEffect(()=>{const l=document.querySelector(".catalogCategories").childNodes;f=B("All Categories",l),f.classList.add("selectedCategoryBtn")},[]),g.useEffect(()=>{f&&document.querySelector(".selectedCategoryBtn")&&(document.querySelector(".selectedCategoryBtn").classList.remove("selectedCategoryBtn"),f.classList.add("selectedCategoryBtn"))},[f]),g.useEffect(()=>{const l=document.querySelector(".catalogCategories").childNodes;s!=null&&s.category?f=B(s.category[0]!=="*"?s.category[0]:"All Categories",l):f=B("All Categories",l)},[s]),u("div",{className:"catalogHeader",children:[u("div",{className:"catalogCategoryName",children:[u("p",{children:["Women ",e.filters.category[0]==="*"?"Clothing":e.filters.category]}),e.filters.name?u("p",{className:"catalogHeaderSearchValue",children:["Search result for: ",e.filters.name]}):""]}),a("div",{className:"catalogCategories",children:J.map((l,h)=>l===(s==null?void 0:s.category)?a("button",{className:"selectedCategoryBtn",onClick:d,children:l},h):a("button",{onClick:d,children:l},h))}),u("div",{className:"catalogFilterAndAmountContainer",children:[a("div",{className:"catalogProductAmount",children:u("p",{children:[e.rawSearchData.length," Products"]})}),u("button",{className:"catalogFilter",ref:c,children:[a("img",{src:q}),"Filter"]})]}),a(X,{filtersBtn:c,urlParams:s})]})}const D=["name","category","range","sale","color","size"];function P(o){let e;const r=[];if(o.length>10){e=Math.ceil(o.length/10);for(let i=0;i<e;i++){let s=[],t=i===0?1:i+1,n=i*10;for(n;n<=t*10&&!(n>=t*10||n+1>o.length);n++)s.push(o[n]);r.push(s)}}else{let i=[],s=1;for(let t=0;t<=s*10&&!(t>=s*10||t+1>o.length);t++)i.push(o[t]);r.push(i)}return r}function Q(){const o=T(),e=L(),r=b(e),[i,s]=g.useState({filters:{name:r==null?void 0:r.searchValue,category:[["*"]]},rawSearchData:F({name:r==null?void 0:r.searchValue,category:["*"]},N),searchData:P(F({name:r==null?void 0:r.searchValue,category:[["*"]]},N)),catalogPage:1});return g.useEffect(()=>{const t=b(e),n={};for(const c in t)for(const d in D)if(c===D[d]){n[c]=t[c];break}Object.keys(n).length!==0?(console.log("Result: ",F({...n},N),{...n}),s({...i,filters:n.category?{...n}:{...n,category:["*"]},rawSearchData:F({...n},N),searchData:P(F({...n},N)),catalogPage:1})):(s({filters:{name:t==null?void 0:t.searchValue,category:["*"]},rawSearchData:F({name:t==null?void 0:t.searchValue,category:["*"]},N),searchData:P(F({name:t==null?void 0:t.searchValue,category:["*"]},N)),catalogPage:1}),o("/catalog"))},[e.search]),a(E,{children:u("div",{className:"websiteContent",children:[a(G,{catalogData:i,setCatalogData:s,searchValue:r==null?void 0:r.searchValue}),a(x,{catalogData:i,setCatalogData:s,searchValue:r==null?void 0:r.searchValue}),a($,{catalogData:i,setCatalogData:s})]})})}export{Q as default};
