import{a as i,F as w,j as o,r as a,d as I}from"./index-a735902b.js";import{s as y,J as q}from"./filter-8d223ecb.js";function _(c){const e=c.productData;return i(w,{children:[o("p",{className:"productPercentOff",children:e!=null&&e.discount?`Save ${e==null?void 0:e.discount.percentage}%`:""}),i("div",{className:"productPriceContainer",children:[o("p",{className:"productPrice",children:e!=null&&e.discount?"":"$"+(e==null?void 0:e.price)}),o("p",{className:"productPriceAfterDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.discount.price_after_discount):""}),o("p",{className:"productPriceBeforeDiscount",children:e!=null&&e.discount?"$"+(e==null?void 0:e.price):""})]})]})}function D(c){const e=c.productData,[l,t]=a.useState(e==null?void 0:e.colors[0]),s=n=>{t(n.target.attributes.btncolor.value),c.productCartData(r=>({...r,color:n.target.attributes.btncolor.value})),n.target.parentNode.childNodes.forEach(r=>{r.style.border="2px solid rgba(0, 0, 0 , 0.5)",r.style.boxShadow="none"}),n.target.style.border="2px solid white",n.target.style.boxShadow="0px 0px 0px 2px rgba(0, 0, 0,.75)"};return a.useEffect(()=>{t(e==null?void 0:e.colors[0])},[c.productData]),i("div",{className:"productColorsContainer",children:[i("p",{className:"productSelectedColor",children:["Color  ",i("span",{children:["- ",l]})]}),o("div",{className:"colorsBtns",children:e==null?void 0:e.colors.map((n,r)=>o("button",{style:{backgroundColor:n,boxShadow:r===0?"0px 0px 0px 2px rgba(0, 0, 0,.75)":"none",border:r===0?"2px solid white":"2px solid rgba(0, 0, 0 , 0.5)"},onClick:s,btncolor:n,children:n},n))})]})}function L(c){const e=c.productData,[l,t]=a.useState("Chose your size "),s=r=>{document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open")},n=r=>{t(r.target.textContent),c.productCartData(d=>({...d,size:r.target.textContent})),document.querySelector(".productSizesContainer").classList.remove("open")};return i("div",{className:"productSizesContainer",children:[o("p",{children:"Size"}),i("button",{className:"sizesBtn",onClick:s,children:[l,i("div",{className:"btnarrow",children:[o("div",{className:"leftarrow"}),o("div",{className:"rightarrow"})]})]}),o("div",{className:"sizesdropdownMenu",children:e==null?void 0:e.sizes.map(r=>o("button",{onClick:n,children:r},r))})]})}function k(c){const e={...c==null?void 0:c.productCartData,uniqueID:`${c==null?void 0:c.productCartData.name}-${c==null?void 0:c.productCartData.color}-${c==null?void 0:c.productCartData.size}`};return o("button",{className:"toCartBtn",onClick:t=>{if(c.productCartData.size==="")document.querySelector(".productSizesContainer").classList.contains("open")?document.querySelector(".productSizesContainer").classList.remove("open"):document.querySelector(".productSizesContainer").classList.add("open");else{t.target.childNodes[0].classList.add("cartBtnAnimation");let s;localStorage.getItem("cartProducts")===null?s=[]:s=JSON.parse(localStorage.getItem("cartProducts")),s.filter((n,r)=>((n==null?void 0:n.uniqueID)===(e==null?void 0:e.uniqueID)&&(console.log(s[r]),s[r].amount+=1),(n==null?void 0:n.uniqueID)===(e==null?void 0:e.uniqueID))).length>0?console.log("found pair"):s.unshift(e),localStorage.setItem("cartProducts",JSON.stringify(s)),document.querySelector(".navCartNotification").textContent=s.length}},children:o("div",{className:""})})}function $(){var d,u,m,S,C,f,h,g;let c=I();const[e,l]=a.useState(Number(c.id)),[t,s]=a.useState({}),[n,r]=a.useState({name:(d=t[0])==null?void 0:d.name,price:(u=t[0])==null?void 0:u.price,discount:(m=t[0])!=null&&m.discount?{percent:(S=t[0])==null?void 0:S.discount.percent,price_after_discount:(C=t[0])==null?void 0:C.discount.price_after_discount}:null,color:"",size:"",image:(f=t[0])==null?void 0:f.image,amount:1});return a.useEffect(()=>{s(y({id:[e]},q))},[]),a.useEffect(()=>{l(Number(c.id))},[c]),a.useEffect(()=>{s(y({id:[e]},q))},[e]),a.useEffect(()=>{var N,b,z,P,x,p,v;r({name:(N=t[0])==null?void 0:N.name,price:(b=t[0])==null?void 0:b.price,discount:(z=t[0])!=null&&z.discount?{percent:(P=t[0])==null?void 0:P.discount.percentage,price_after_discount:(x=t[0])==null?void 0:x.discount.price_after_discount}:null,color:(p=t[0])==null?void 0:p.colors[0],size:"",image:(v=t[0])==null?void 0:v.image,amount:1})},[t]),i("div",{className:"productScreen",children:[o("img",{src:(h=t[0])==null?void 0:h.image}),i("div",{className:"productContent",children:[o("p",{className:"productName",children:(g=t[0])==null?void 0:g.name}),o(_,{productData:t[0]}),o(D,{productData:t[0],productCartData:r}),o(L,{productData:t[0],productCartData:r}),o(k,{productData:t[0],productCartData:n})]})]})}export{$ as default};
